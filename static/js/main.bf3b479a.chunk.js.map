{"version":3,"sources":["components/swiper/index.module.css","components/recommendList/music.png","style.js","assets/global-style.js","application/Home/style.js","application/Home/index.js","components/swiper/index.js","components/recommendList/style.js","api/utils.js","components/recommendList/index.js","components/scroll/style.js","baseUI/loading/index.js","components/scroll/index.js","application/Recommend/style.js","application/Recommend/store/constants.js","api/config.js","api/require.js","application/Recommend/store/actionCreator.js","application/Recommend/index.js","baseUI/horizonItem/style.js","baseUI/horizonItem/index.js","application/Singers/style.js","application/Singers/store/constants.js","application/Singers/store/actionCreators.js","application/Singers/index.js","application/Rank/store/index.js","application/Rank/style.js","application/Rank/index.js","application/Album/style.js","application/Album/store/constants.js","application/Album/store/actionCreators.js","baseUI/fixedContainer/index.js","baseUI/marquee/style.js","baseUI/marquee/index.js","baseUI/header/index.js","components/songList/style.js","application/Player/store/constants.js","application/Player/store/actionCreators.js","components/songList/index.js","application/Album/index.js","application/Singer/store/constants.js","application/Singer/store/actionCreators.js","application/Singer/style.js","application/Singer/index.js","application/Player/miniPlayer/style.js","baseUI/progress-circle/index.js","application/Player/miniPlayer/index.js","application/Player/normalPlayer/style.js","baseUI/progressBar/index.js","application/Player/normalPlayer/index.js","baseUI/toast/index.js","baseUI/playList/style.js","baseUI/playList/index.js","application/Player/index.js","application/Search/style.js","application/Search/index.js","routes/index.js","application/Recommend/store/reducer.js","application/Singers/store/reducer.js","application/Album/store/reducer.js","application/Singer/store/reducer.js","application/Player/store/reducer.js","store/reducer.js","store/index.js","App.js","index.js"],"names":["module","exports","createGlobalStyle","style","extendClick","noWrap","flex","Top","styled","header","Tab","div","Home","nav","useNavigate","className","onClick","to","isActive","Swiper","props","width","height","list","pagination","handleDoubleClick","slideButton","loop","interval","autoPlay","paginationColor","paginationActiveColor","length","console","warn","useState","containerWidth","setContainerWidth","containerRef","useRef","useEffect","current","offsetWidth","currentPage","setCurrentPage","currentX","handleSlide","isNext","handleMouseDown","e","clientX","handleMouseUp","end","handleTouchStart","changedTouches","handleTouchEnd","auto","setInterval","clearInterval","wrapperStyle","transform","swiperItems","map","item","index","swiper_item","onMouseDown","onMouseUp","onTouchStart","onTouchEnd","onDoubleClick","backgroundImage","paginationItemStyle","backgroundColor","paginationBar","swiper_pagination","pagination_item","handlePaginationClick","slideButtons","arrow_right","swiper_container","ref","swiper_wrapper","defaultProps","n","log","ListWrapper","List","ListItem","getCount","count","Math","floor","debounce","fn","delay","args","timer","clearTimeout","setTimeout","getName","str","name","isValidObject","obj","Object","keys","formatPlayTime","minute","second","toString","padStart","RecommendList","recommendList","id","placeholder","src","require","default","alt","picUrl","playCount","ScrollContainer","loading","keyframes","LoadingWrapper","Loading","React","memo","Scroll","forwardRef","bScroll","setBScroll","scrollContaninerRef","direction","click","refresh","onScroll","pullUp","pullDown","pullUpLoading","pullDownLoading","bounceTop","bounceBottom","pullUpCallback","useMemo","pullDownCallback","scroll","BScroll","scrollX","scrollY","probeType","bounce","top","bottom","on","off","y","maxScrollY","pos","useImperativeHandle","scrollTo","getBScroll","children","WholeContainer","SwiperContainer","Content","CHANGE_BANNER","CHANGE_RECOMMEND_LIST","CHANGE_ENTER_LOADING","instance","axios","create","baseURL","interceptors","response","use","res","data","err","categoryTypes","key","alphaTypes","getHotSingerListRequest","get","getSingerListRequest","category","alpha","toLowerCase","getBannerListAction","dispatch","then","type","fromJS","changeBannerList","banners","imageUrl","catch","getRecommendListAction","changeRecommendList","result","changeEnterLoading","connect","state","bannerList","getIn","enterLoading","getBannerListDispatch","getRecommendListDispatch","size","bannerListJS","toJS","recommendListJS","forceCheck","span","Horizon","currentItem","title","handleClick","NavContainer","ListContainer","CHANGE_SINGER_LIST","CHANGE_PAGE_COUNT","CHANGE_PULLUP_LOADING","CHANGE_PULLDOWN_LOADING","changeSingerList","changePageCount","changePullUpLoading","changePullDownLoading","getHotSingerList","artists","getSingerList","getState","Singers","setCategory","setAlpha","updateDispatch","getHotSingerDispatch","pullUpRefreshDispatch","pullDownRefreshDispatch","pageCount","singerList","singerListElement","accountId","val","handleUpdateCatetory","handleUpdateAlpha","hot","concat","refreshMoreSingerList","CHANGE_RANK_LIST","CHANGE_LOADING","getRankList","changeRankList","changeLoading","defaultState","rankList","isLoading","Title","p","OfficialRankContainer","Frequency","GlobalRankContainer","getRankListDispatch","globalStartIndex","i","tracks","filterIndex","officialList","slice","globalList","officialRankList","position","coverImgUrl","updateFrequency","first","ToplistType","globalRankList","TopContainer","TopBackground","background","CHANGE_CURRENT_ALBUM","CHANGE_IS_LOADING","getAlbumList","getAlbumDetailRequest","playlist","changeIsLoading","Container","FixedContainer","move","Marquee","HeaderContainer","Header","moveY","marqueeContent","headerStyle","showBackground","ListHeader","SET_CURRENT_SONG","SET_FULL_SCREEN","SET_PLAYING_STATE","SET_SEQUECE_PLAYLIST","SET_PLAYLIST","SET_PLAY_MODE","SET_CURRENT_INDEX","SET_SHOW_PLAYLIST","DELETE_SONG","changePlayingState","changePlayList","changeCurrentIndex","setPlayListDispatch","setCurrentIndexDispatch","setPlayingStateDispatch","showCollect","subscribedCount","handleChangePlayList","songs","ar","al","currentAlbum","getAlbumListDispatch","album","params","useParams","setY","handleScroll","useCallback","x","isValidChange","renderButtons","text","icon","creator","avatarUrl","nickname","CHANGE_ARTIST","CHANGE_SONGS","setIsLoading","getSingerInfoAction","getSingerInfoRequest","artist","setSongs","hotSongs","BackgroundImage","url","ImgWrapper","CollectButton","ScrollWrapper","SongWrapper","initSingerInfoDispatch","rotate","MiniPlayerContainer","CircleWrapper","ProgressCircle","radius","percent","dashArray","PI","dashOffset","viewBox","version","xmlns","r","cx","cy","fill","strokeDasharray","strokeDashoffset","MiniPlayer","song","fullScreen","isPlaying","toggleFullScreen","togglePlaying","togglePlayList","fontSize","NormalContainer","NormalHeader","ImageContainer","OptionBar","ProgressWrapper","ProgressBarWrapper","BtnWrapper","percentage","ProgressBar","setPercentage","progressContainer","btnRef","wholeWidth","progressStart","prePercentage","offsetLeft","offsetParent","getAbsX","offset","newPer","toFixed","onTouchMove","touches","NormalPlayer","duration","currentTime","mode","handleProgressChange","handleModeChange","handleSwitchToPrev","handleSwitchToNext","ToastWrapper","Toast","show","setShow","setTimer","CSSTransition","in","timeout","classNames","unmountOnExit","playListImmutable","deleteSong","playList","outsideRef","target","handleChangeSong","Player","immutableCurrentSong","currentSong","immutableList","currentIndex","showPlayList","toggleFullScreenDispatch","togglePlayingDispatch","changeCurrentIndexDispatch","changeCurrentDispatch","changeModeDispatch","togglePlayListDispatch","setCurrentTime","setDuration","isNaN","audioRef","toastRef","modeText","setModeText","startPlay","noCopyright","addEventListener","play","dt","handleIsPlaying","status","pause","handleSwitch","getNextIndex","tar","round","random","currentPercent","newTime","Number","parseFloat","nextMode","onTimeUpdate","onEnded","sequencePlayList","changeFullScreen","changeShowPlayList","changeCurrentSong","changePlayMode","changePlayListDispatch","HotWordsContainer","SuggestContainer","SearchResult","Search","inputValue","setInputValue","hotWordsList","setHotWordsList","suggestList","setSuggestList","searchResult","setSearchResult","hots","query","handleSearch","word","handleInputChange","v","renderHotWords","value","onChange","albums","routes","path","element","exact","RouteWrapper","useRoutes","reducer","action","set","sequencePlaylist","showPlaylist","combineReducers","recommend","singers","singer","rank","player","actionTypes","splice","composeEnhancers","window","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","store","createStore","applyMiddleware","thunk","App","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.bf3b479a.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"swiper_container\":\"swiper_swiper_container__3pWAi\",\"swiper_wrapper\":\"swiper_swiper_wrapper__1KGIg\",\"swiper_item\":\"swiper_swiper_item__X7yjn\",\"swiper_pagination\":\"swiper_swiper_pagination__24AtW\",\"pagination_item\":\"swiper_pagination_item__1sVJ2\",\"slideButton\":\"swiper_slideButton__31rKd\",\"arrow_right\":\"swiper_arrow_right__3-XGy\"};","export default __webpack_public_path__ + \"static/media/music.6275a6ce.png\";","import { createGlobalStyle } from \"styled-components\";\r\n\r\nexport default createGlobalStyle`\r\n\thtml, body, div, span, applet, object, iframe,\r\n\th1, h2, h3, h4, h5, h6, p, blockquote, pre,\r\n\ta, abbr, acronym, address, big, cite, code,\r\n\tdel, dfn, em, img, ins, kbd, q, s, samp,\r\n\tsmall, strike, strong, sub, sup, tt, var,\r\n\tb, u, i, center,\r\n\tdl, dt, dd, ol, ul, li,\r\n\tfieldset, form, label, legend,\r\n\ttable, caption, tbody, tfoot, thead, tr, th, td,\r\n\tarticle, aside, canvas, details, embed, \r\n\tfigure, figcaption, footer, header, hgroup, \r\n\tmenu, nav, output, ruby, section, summary,\r\n\ttime, mark, audio, video {\r\n\t\tmargin: 0;\r\n\t\tpadding: 0;\r\n\t\tborder: 0;\r\n\t\tfont-size: 100%;\r\n\t\tfont: inherit;\r\n\t\tvertical-align: baseline;\r\n\t}\r\n\t/* HTML5 display-role reset for older browsers */\r\n\tarticle, aside, details, figcaption, figure, \r\n\tfooter, header, hgroup, menu, nav, section {\r\n\t\tdisplay: block;\r\n\t}\r\n\tbody {\r\n\t\tline-height: 1;\r\n\t}\r\n\thtml, body {\r\n\t\tbackground: #f2f3f4;;\r\n\t}\r\n\tol, ul {\r\n\t\tlist-style: none;\r\n\t}\r\n\tblockquote, q {\r\n\t\tquotes: none;\r\n\t}\r\n\tblockquote:before, blockquote:after,\r\n\tq:before, q:after {\r\n\t\tcontent: '';\r\n\t\tcontent: none;\r\n\t}\r\n\ttable {\r\n\t\tborder-collapse: collapse;\r\n\t\tborder-spacing: 0;\r\n\t}\r\n\ta {\r\n\t\ttext-decoration: none;\r\n\t\tcolor: #fff;\r\n\t}\r\n`","const extendClick = () => {\r\n  return `\r\n    position: relative;\r\n    &:before {\r\n      content: '';\r\n      position: absolute;\r\n      top: -10px; bottom: -10px; left: -10px; right: -10px;\r\n    };\r\n  `\r\n}\r\n// 一行文字溢出部分用... 代替\r\nconst noWrap = () => {\r\n  return `\r\n    text-overflow: ellipsis;\r\n    overflow: hidden;\r\n    white-space: nowrap;\r\n  `\r\n}\r\n\r\nconst flex = () => `\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n`\r\nconst style = {\r\n  'theme-color': '#d44439',\r\n  'theme-color-shadow': 'rgba(212, 68, 57, .5)',\r\n  'font-color-light': '#f1f1f1',\r\n  'font-color-desc': '#2E3030',\r\n  'font-color-desc-v2': '#bba8a8',// 略淡\r\n  'font-size-ss': '10px',\r\n  'font-size-s': '12px',\r\n  'font-size-m': '14px',\r\n  'font-size-l': '16px',\r\n  'font-size-ll': '18px',\r\n  \"border-color\": '#e4e4e4',\r\n  'background-color': '#f2f3f4',\r\n  'background-color-shadow': 'rgba(0, 0, 0, 0.3)',\r\n  'highlight-background-color': '#fff',\r\n  extendClick,\r\n  noWrap,\r\n  flex\r\n}\r\nexport default style\r\n","import styled from \"styled-components\";\r\nimport style from '../../assets/global-style';\r\n\r\nexport const Top = styled.header`\r\n    display: flex;\r\n    justify-content: space-between;\r\n    padding: 5px 10px;\r\n    background-color: ${style['theme-color']};\r\n    & span{\r\n        line-height: 40px;\r\n        color: #f1f1f1;\r\n        font-size: 20px;\r\n        &.iconfont {\r\n            font-size: 25px;\r\n        }\r\n    }\r\n`\r\n\r\nexport const Tab = styled.div`\r\n    height: 44px;\r\n    background-color: ${style['theme-color']};\r\n    display: flex;\r\n    justify-content: space-around;\r\n    a {\r\n        display: flex;\r\n        justify-content: center;\r\n        align-items: center;\r\n    }\r\n    .selected {\r\n        span{\r\n            padding: 3px 0;\r\n            font-weight: 700;\r\n            color: #f1f1f1;\r\n            border-bottom: 2px solid #f1f1f1;\r\n        }\r\n    }\r\n`","import React from 'react';\r\nimport { NavLink, Outlet } from 'react-router-dom';\r\nimport {\r\n  Top,\r\n  Tab,\r\n} from './style';\r\nimport { useNavigate } from 'react-router-dom';\r\n\r\nfunction Home () {\r\n\tconst nav = useNavigate();\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<Top>\r\n\t\t\t\t<span className='iconfont icon-caidan'></span>\r\n\t\t\t\t<span>网易云音乐</span>\r\n\t\t\t\t<span className='iconfont icon-sousuo' onClick={() => nav('/search')}></span>\r\n\t\t\t</Top>\r\n\t\t\t<Tab>\r\n\t\t\t\t<NavLink to='/recommend' className={({isActive}) => isActive ? 'selected' : ''}>\r\n\t\t\t\t\t<span>推荐</span>\r\n\t\t\t\t</NavLink>\r\n\t\t\t\t<NavLink to='/singers' className={({isActive}) => isActive ? 'selected' : ''}>\r\n\t\t\t\t\t<span>歌手</span>\r\n\t\t\t\t</NavLink>\r\n\t\t\t\t<NavLink to='/rank' className={({isActive}) => isActive ? 'selected' : ''}>\r\n\t\t\t\t\t<span>排行榜</span>\r\n\t\t\t\t</NavLink>\r\n\t\t\t</Tab>\r\n\t\t\t<Outlet/>\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nexport default Home;","import React, { useRef, useEffect, useState } from \"react\";\r\nimport style from './index.module.css';\r\nimport PropTypes from 'prop-types';\r\nfunction Swiper(props) {\r\n    const {\r\n        width,\r\n        height,\r\n        list,\r\n        pagination,\r\n        handleDoubleClick,\r\n        slideButton,\r\n        loop,\r\n        interval,\r\n        autoPlay,\r\n        paginationColor,\r\n        paginationActiveColor,\r\n    } = props;\r\n    if(list.length === 0){\r\n        console.warn(\"The length of list shouldn't be less than 1\");\r\n    }\r\n\r\n    // 定义并设置总容器的宽度\r\n    const [containerWidth, setContainerWidth] = useState();\r\n    const containerRef = useRef();\r\n    useEffect(() => {\r\n        setContainerWidth(containerRef.current.offsetWidth );\r\n    }, [list.length])\r\n\r\n    // 当前显示图片的下标\r\n    const [currentPage, setCurrentPage] = useState(0);\r\n    let currentX = null;\r\n\r\n    // 切换页面函数\r\n    const handleSlide = (isNext) => {\r\n        if(isNext) {\r\n            if(currentPage < list.length-1){\r\n                setCurrentPage(currentPage + 1);\r\n            }\r\n            else if(loop) {\r\n                setCurrentPage(0);\r\n            }\r\n            \r\n        }\r\n        else{\r\n            if(currentPage > 0){\r\n                setCurrentPage(currentPage - 1);\r\n            }\r\n            else if(loop){\r\n                setCurrentPage(list.length-1);\r\n            }\r\n            \r\n        } \r\n    }\r\n\r\n    // 监听滑动\r\n    const handleMouseDown = e => {\r\n        currentX = e.clientX\r\n    }\r\n    const handleMouseUp = e => {\r\n        const end = e.clientX;\r\n        if( end - currentX > 20) {\r\n            handleSlide(false);\r\n        }\r\n        else if( currentX - end > 20) {\r\n            handleSlide(true);\r\n        }\r\n    }\r\n\r\n    // 移动端监听滑动\r\n    const handleTouchStart = e => {\r\n        currentX = e.changedTouches[0].clientX;\r\n    }\r\n    const handleTouchEnd = e => {\r\n        const end = e.changedTouches[0].clientX;\r\n        if( end - currentX > 20) {\r\n            handleSlide(false);\r\n        }\r\n        else if( currentX - end > 20) {\r\n            handleSlide(true);\r\n        }\r\n    }\r\n\r\n    // 设置自动播放\r\n    useEffect(() => {\r\n        if(autoPlay){\r\n            const auto = setInterval(() => {\r\n                handleSlide(true);\r\n            }, interval)\r\n            return () => {\r\n                clearInterval(auto);\r\n            }\r\n        }\r\n    })\r\n\r\n    // 设置wrapper的宽度为图片数量 * 父级元素宽度，并通过transform属性达到图片滚动效果\r\n    const wrapperStyle = {\r\n        width: `${list.length}00%`,\r\n        transform: `translateX(-${containerWidth * currentPage}px)`\r\n    }\r\n\r\n    // 轮播图内容\r\n    const swiperItems = list.map((item, index) => (\r\n        <div \r\n            key={index}\r\n            className={style.swiper_item}\r\n            onMouseDown={handleMouseDown}\r\n            onMouseUp={handleMouseUp}\r\n            onTouchStart={handleTouchStart}\r\n            onTouchEnd={handleTouchEnd}\r\n            onDoubleClick={() => handleDoubleClick(index)}\r\n            style={{backgroundImage: `url(${item})`, width:containerWidth}}\r\n        ></div>\r\n    ))\r\n\r\n    // 分页器点击响应函数\r\n    const handlePaginationClick = index => {\r\n        setCurrentPage(index);\r\n    }\r\n\r\n    // 分页器样式\r\n    const paginationItemStyle = (index) => {\r\n        return {\r\n            backgroundColor: index === currentPage ? paginationActiveColor : paginationColor\r\n        }\r\n    }\r\n\r\n    // 底部分页器\r\n    const paginationBar = (\r\n        <div className={style.swiper_pagination}>\r\n            {list.map((item, index) => \r\n                <div \r\n                    key={index}\r\n                    className={style.pagination_item}\r\n                    onClick={() => handlePaginationClick(index)}\r\n                    style={paginationItemStyle(index)}\r\n                ></div>\r\n            )}\r\n        </div>\r\n    )\r\n\r\n    // 上/下一个按钮\r\n    const slideButtons = (\r\n        <>\r\n            <div \r\n                className={style.slideButton} \r\n                onClick={() => handleSlide(false)}\r\n            >{'<'}</div>\r\n            <div \r\n                className={style.slideButton + ' ' + style.arrow_right}\r\n                onClick={() => handleSlide(true)}\r\n            >{'>'}</div>\r\n        </>\r\n    )\r\n\r\n    return (\r\n        <div className={style.swiper_container} ref={containerRef} style={{width,height}}>\r\n            <div className={style.swiper_wrapper} style={wrapperStyle}>\r\n                { swiperItems }\r\n            </div>\r\n            {slideButton && slideButtons}\r\n            {pagination && paginationBar}\r\n        </div>\r\n    )\r\n}\r\n\r\nSwiper.propTypes = {\r\n    // 数据列表,必填属性\r\n    list: PropTypes.array.isRequired,\r\n\r\n    // 总容器尺寸，默认为占满父容器\r\n    width: PropTypes.oneOfType([PropTypes.number, PropTypes.string]),\r\n    height: PropTypes.oneOfType([PropTypes.number, PropTypes.string]),\r\n\r\n    // 是否显示分页器\r\n    pagination: PropTypes.bool,\r\n\r\n    // 是否显示上/下一个按钮\r\n    slideButton: PropTypes.bool,\r\n\r\n    // 是否循环播放\r\n    loop: PropTypes.bool,\r\n\r\n    // 是否自动播放\r\n    autoPlay: PropTypes.bool,\r\n\r\n    // 自动播放时间间隔\r\n    interval: PropTypes.number,\r\n\r\n    // 双击响应函数，接收下标N\r\n    handleDoubleClick: PropTypes.func,\r\n\r\n    // 分页器颜色\r\n    paginationColor: PropTypes.string,\r\n    paginationActiveColor: PropTypes.string,\r\n}\r\n\r\nSwiper.defaultProps = {\r\n    width: '100%',\r\n    height: '100%',\r\n    pagination: true,\r\n    slideButton: true,\r\n    loop: true,\r\n    autoPlay: false,\r\n    handleDoubleClick: function(n){console.log('clicked: ', n)},\r\n    interval: 3000,\r\n    paginationColor: '#eee',\r\n    paginationActiveColor: '#999',\r\n}\r\nexport default Swiper;","import styled from'styled-components';\r\nimport style from '../../assets/global-style';\r\n\r\nexport const ListWrapper = styled.div`\r\n    max-width: 100%;\r\n    .title {\r\n        font-weight: 700;\r\n        padding-left: 6px;\r\n        font-size: 14px;\r\n        line-height: 60px;\r\n    }\r\n`;\r\nexport const List = styled.div`\r\n    width: 100%;\r\n    display: flex;\r\n    flex-direction: row;\r\n    flex-wrap: wrap;\r\n    justify-content: space-around;\r\n`;\r\n\r\nexport const ListItem = styled.div`\r\n    position: relative;\r\n    width: 32%;\r\n\r\n    .img_wrapper {\r\n        .decorate {\r\n            position: absolute;\r\n            top: 0;\r\n            width: 100%;\r\n            height: 35px;\r\n            border-radius: 3px;\r\n            background: linear-gradient (hsla (0,0%,43%,.4),hsla (0,0%,100%,0));\r\n        }\r\n        position: relative;\r\n        height: 0;\r\n        padding-bottom: 100%;\r\n        .play_count {\r\n            position: absolute;\r\n            right: 2px;\r\n            top: 2px;\r\n            font-size: ${ style[\"font-size-s\"] };\r\n            line-height: 15px;\r\n            color: ${ style[\"font-color-light\"] };\r\n            .play {\r\n                vertical-align: top;\r\n            }\r\n        }\r\n        img {\r\n            position: absolute;\r\n            width: 100%;\r\n            height: 100%;\r\n            border-radius: 3px;\r\n        }\r\n    }\r\n    .desc {\r\n        overflow: hidden;\r\n        margin-top: 2px;\r\n        padding: 0 2px;\r\n        height: 50px;\r\n        text-align: left;\r\n        font-size: ${style[\"font-size-s\"]};\r\n        line-height: 1.4;\r\n        color: ${style[\"font-color-desc\"]};\r\n        }\r\n`;","export const getCount = (count) => {\r\n    if (count < 0) return;\r\n    if (count < 10000) {\r\n        return count;\r\n    } else if (Math.floor (count / 10000) < 10000) {\r\n        return Math.floor (count/1000)/10 + \"万\";\r\n    } else {\r\n        return Math.floor (count / 10000000)/ 10 + \"亿\";\r\n    }\r\n}\r\n\r\nexport const debounce = (fn, delay, ...args) => {\r\n    let timer = null;\r\n    return function() {\r\n        if(timer) {\r\n            clearTimeout(timer);\r\n            timer = setTimeout(() => {\r\n                clearTimeout(timer);\r\n                fn(...args)\r\n            }, delay)\r\n        }else {\r\n            fn(...args);\r\n        }\r\n    }\r\n}\r\n\r\nexport const filterIndex = rankList => {\r\n  for (let i = 0; i < rankList.length - 1; i++) {\r\n    if (rankList[i].tracks.length && !rankList[i + 1].tracks.length) {\r\n      return i + 1;\r\n    }\r\n  }\r\n};\r\n\r\nexport const getName = list => {\r\n  let str = \"\";\r\n  list.map ((item, index) => {\r\n    str += index === 0 ? item.name : \"/\" + item.name;\r\n    return item;\r\n  });\r\n  return str;\r\n};\r\n\r\nexport const isValidChange = (x, y) => {\r\n  return x - y > 1 || y - x > 4;\r\n}\r\n\r\nexport function getAbsX(e) {   \r\n  var x = e.offsetLeft;   \r\n  while(e=e.offsetParent) {\r\n   x += e.offsetLeft;\r\n  }\r\n  return x;  \r\n}\r\n\r\nexport const getSongUrl = id => {\r\n  return `https://music.163.com/song/media/outer/url?id=${id}.mp3`;\r\n};\r\n\r\nexport function isValidObject(obj) {\r\n  return Object.keys(obj).length > 0;\r\n}\r\n\r\nexport const formatPlayTime = interval => {\r\n  interval = interval | 0;// |0表示向下取整\r\n  const minute = (interval / 60) | 0;\r\n  const second = (interval % 60).toString().padStart(2, \"0\");\r\n  return `${minute}:${second}`;\r\n};","import React from \"react\";\r\nimport { \r\n  ListWrapper,\r\n  ListItem,\r\n  List\r\n} from './style';\r\nimport { getCount } from \"../../api/utils\";\r\nimport LazyLoad from \"react-lazyload\";\r\nimport { useNavigate } from \"react-router\";\r\n\r\nfunction RecommendList(props) {\r\n    const { recommendList } = props;\r\n    const nav = useNavigate()\r\n    return (\r\n        <ListWrapper>\r\n            <div className=\"title\">推荐歌单</div>\r\n            <List>\r\n                {\r\n                    recommendList.map((item, index) => {\r\n                        return (\r\n                            <ListItem key={index} onClick={() => nav(`${item.id}`)}>\r\n                                <div className=\"img_wrapper\">\r\n                                    <div className=\"decorate\"></div>\r\n\t\t\t\t\t\t\t\t\t<LazyLoad placeholder={<img width=\"100%\" height=\"100%\" src={require ('./music.png').default} alt=\"music\"/>}>\r\n\t\t\t\t\t\t\t\t\t\t<img src={item.picUrl + \"?param=300x300\"} width=\"100%\" height=\"100%\" alt=\"music\"/>\r\n\t\t\t\t\t\t\t\t\t</LazyLoad>\r\n                                    <div className=\"play_count\">\r\n                                        <i className=\"iconfont play\">&#xe885;</i>\r\n                                        <span className=\"count\">{getCount (item.playCount)}</span>\r\n                                    </div>\r\n                                </div>\r\n                                <div className=\"desc\">{item.name}</div>\r\n                            </ListItem>\r\n                        )\r\n                    })\r\n                }\r\n            </List>\r\n        </ListWrapper>\r\n    )\r\n}\r\n\r\nexport default RecommendList;","import styled from'styled-components';\r\nexport const ScrollContainer = styled.div`\r\n  width: 100%;\r\n  height: 100%;\r\n  overflow: hidden;\r\n`","import React from 'react';\r\nimport styled, { keyframes } from'styled-components';\r\nimport style from '../../assets/global-style';\r\n\r\nconst loading = keyframes`\r\n  0%, 100% {\r\n    transform: scale(0.0);\r\n  }\r\n  50% {\r\n    transform: scale(1.0);\r\n  }\r\n`\r\nconst LoadingWrapper = styled.div`\r\n  div {\r\n    position: fixed;\r\n    z-index: 1000;\r\n    left: 0; \r\n    right: 0;  \r\n    top: 0;\r\n    bottom: 0;\r\n    margin: auto;\r\n    width: 60px;\r\n    height: 60px;\r\n    opacity: 0.6;\r\n    border-radius: 50%;\r\n    background-color: ${style[\"theme-color\"]};\r\n    animation: ${loading} 1.4s infinite ease-in;\r\n  }\r\n  .delay {\r\n    animation-delay: -0.7s;\r\n\t\tanimation: ${loading} 2.8s infinite ease-in;\r\n  }\r\n`\r\n\r\nfunction Loading ()  {\r\n  return (\r\n    <LoadingWrapper>\r\n      <div></div>\r\n      <div className='delay'></div>\r\n    </LoadingWrapper>\r\n  );\r\n}\r\n \r\nexport default React.memo(Loading);","import React, { \r\n    forwardRef, \r\n    useState, \r\n    useRef, \r\n    useEffect,\r\n    useImperativeHandle,\r\n    useMemo\r\n} from \"react\"\r\nimport PropTypes from \"prop-types\"\r\nimport BScroll from \"better-scroll\";\r\nimport { ScrollContainer } from './style'\r\nimport Loading from '../../baseUI/loading';\r\nimport { debounce } from '../../api/utils';\r\n\r\nconst Scroll = forwardRef ((props, ref) => {\r\n    const [ bScroll, setBScroll] = useState();\r\n    const scrollContaninerRef = useRef (); // 指向实例需要的DOM元素\r\n    const {\r\n        direction,\r\n        click,\r\n        refresh,\r\n        onScroll,\r\n        pullUp,\r\n        pullDown,\r\n        pullUpLoading,\r\n        pullDownLoading,\r\n        bounceTop,\r\n        bounceBottom,\r\n    } = props;\r\n\r\n    const pullUpCallback = useMemo(() => {\r\n        return debounce(pullUp);\r\n    }, [pullUp]);\r\n\r\n    const pullDownCallback = useMemo(() => {\r\n        return debounce(pullDown);\r\n    }, [pullDown]);\r\n\r\n    // 初始化BScroll实例\r\n    useEffect(() => {\r\n        const scroll = new BScroll (scrollContaninerRef.current, {\r\n            scrollX: direction === \"horizental\",\r\n            scrollY: direction === \"vertical\",\r\n            probeType: 3,\r\n            click: click,\r\n            bounce:{\r\n            top: bounceTop,\r\n            bottom: bounceBottom\r\n            }\r\n        });\r\n        setBScroll (scroll);\r\n        return () => {\r\n            setBScroll (null);\r\n        }\r\n    }, [ direction, click, bounceTop, bounceBottom ])\r\n\r\n    // 每次重新渲染时刷新BScroll实例\r\n    useEffect (() => {\r\n        if (refresh && bScroll){\r\n            bScroll.refresh ();\r\n        }\r\n    });\r\n\r\n    // 绑定滑动事件\r\n    useEffect (() => {\r\n        if (!bScroll || !onScroll) return;\r\n        bScroll.on ('scroll', (scroll) => {\r\n            onScroll (scroll);\r\n        })\r\n        return () => {\r\n            bScroll.off ('scroll');\r\n        }\r\n    }, [onScroll, bScroll]);\r\n\r\n    // 进行上拉到底的判断\r\n    useEffect(() => {\r\n        if(!bScroll || !pullUp) return;\r\n        bScroll.on('scrollEnd', () => {\r\n            if (bScroll.y <= bScroll.maxScrollY + 100){\r\n                pullUpCallback();\r\n            }\r\n        })\r\n        return () => {\r\n            bScroll.off('scrollEnd');\r\n        }\r\n    }, [ bScroll, pullUp, pullUpCallback])\r\n\r\n    // 进行下拉到底的判断\r\n    useEffect (() => {\r\n        if (!bScroll || !pullDown) return;\r\n        bScroll.on ('touchEnd', (pos) => {\r\n            // 判断用户的下拉动作\r\n            if (pos.y > 50) {\r\n                pullDownCallback();\r\n            }\r\n        });\r\n        return () => {\r\n            bScroll.off ('touchEnd');\r\n        }\r\n    }, [pullDown, bScroll, pullDownCallback])\r\n\r\n    // 暴露刷新方法\r\n    useImperativeHandle(ref, () => {\r\n        return {\r\n            // 暴露刷新方法\r\n            refresh() {\r\n                if(bScroll) {\r\n                    bScroll.refresh();\r\n                    bScroll.scrollTo(0, 0);\r\n                }\r\n            },\r\n            getBScroll() {\r\n                return bScroll;\r\n            }\r\n        }\r\n    })\r\n\r\n    return (\r\n        <ScrollContainer ref={scrollContaninerRef}>\r\n            {props.children}\r\n\r\n            {/* 滑到底部加载动画 */}\r\n            { pullUpLoading && <Loading/> }\r\n\r\n            {/* 顶部下拉刷新动画 */}\r\n            { pullDownLoading && <Loading/> }\r\n        </ScrollContainer>\r\n    )\r\n})\r\n\r\nScroll.propTypes = {\r\n    direction: PropTypes.oneOf (['vertical', 'horizental']),// 滚动的方向\r\n    click: PropTypes.bool,// 是否支持点击\r\n    refresh: PropTypes.bool,// 是否刷新\r\n    onScroll: PropTypes.func,// 滑动触发的回调函数\r\n    pullUp: PropTypes.func,// 上拉加载逻辑\r\n    pullDown: PropTypes.func,// 下拉加载逻辑\r\n    pullUpLoading: PropTypes.bool,// 是否显示上拉 loading 动画\r\n    pullDownLoading: PropTypes.bool,// 是否显示下拉 loading 动画\r\n    bounceTop: PropTypes.bool,// 是否支持向上吸顶\r\n    bounceBottom: PropTypes.bool// 是否支持向下吸底\r\n};\r\nScroll.defaultProps = {\r\n    direction: \"vertical\",\r\n    click: true,\r\n    refresh: true,\r\n    onScroll:null,\r\n    pullUpLoading: false,\r\n    pullDownLoading: false,\r\n    pullUp: null,\r\n    pullDown: null,\r\n    bounceTop: true,\r\n    bounceBottom: true\r\n};\r\nexport default Scroll;","import styled from 'styled-components';\r\nimport style from '../../assets/global-style';\r\n\r\nexport const WholeContainer = styled.div`\r\n    width: 100%;\r\n    height: 80px;\r\n    margin-bottom: 80px;\r\n    background-color: ${style['theme-color']};\r\n`\r\n\r\nexport const SwiperContainer = styled.div`\r\n    height: 160px;\r\n    width: 98%;\r\n    margin: 0 auto;\r\n`\r\n\r\nexport const Content = styled.div`\r\n    position: fixed;\r\n    top: 90px;\r\n    bottom: 0;\r\n    width: 100%;\r\n    overflow: hidden;\r\n    .before {\r\n        position: absolute;\r\n        top: -300px;\r\n        height: 400px;\r\n        width: 100%;\r\n        background: ${style[\"theme-color\"]};\r\n    }\r\n`","export const CHANGE_BANNER = 'recommend/CHANGE_BANNER';\r\n\r\nexport const CHANGE_RECOMMEND_LIST = 'recommend/RECOMMEND_LIST';\r\n\r\nexport const CHANGE_ENTER_LOADING = 'recommend/CHANGE_ENTER_LOADING';","import axios from 'axios';\r\n\r\nconst baseURL = 'https://music-api-five.vercel.app/';\r\n\r\nconst instance = axios.create({\r\n    baseURL,\r\n})\r\n\r\ninstance.interceptors.response.use(\r\n    res => res.data,\r\n    err => {\r\n        console.log('网络错误： ', err);\r\n    }\r\n)\r\n\r\n\r\n\r\nconst categoryTypes = [\r\n    {\r\n      name: \"华语男\",\r\n      key: \"1001\"\r\n    },\r\n    {\r\n      name: \"华语女\",\r\n      key: \"1002\"\r\n    },\r\n    {\r\n      name: \"华语组合\",\r\n      key: \"1003\"\r\n    },\r\n    {\r\n      name: \"欧美男\",\r\n      key: \"2001\"\r\n    },\r\n    {\r\n      name: \"欧美女\",\r\n      key: \"2002\"\r\n    },\r\n    {\r\n      name: \"欧美组合\",\r\n      key: \"2003\"\r\n    },\r\n    {\r\n      name: \"日本男\",\r\n      key: \"6001\"\r\n    },\r\n    {\r\n      name: \"日本女\",\r\n      key: \"6002\"\r\n    },\r\n    {\r\n      name: \"日本组合\",\r\n      key: \"6003\"\r\n    },\r\n    {\r\n      name: \"韩国男\",\r\n      key: \"7001\"\r\n    },\r\n    {\r\n      name: \"韩国女\",\r\n      key: \"7002\"\r\n    },\r\n    {\r\n      name: \"韩国组合\",\r\n      key: \"7003\"\r\n    },\r\n    {\r\n      name: \"其他男歌手\",\r\n      key: \"4001\"\r\n    },\r\n    {\r\n      name: \"其他女歌手\",\r\n      key: \"4002\"\r\n    },\r\n    {\r\n      name: \"其他组合\",\r\n      key: \"4003\"\r\n    },\r\n];\r\n\r\n// 歌手首字母\r\nconst alphaTypes = [{\r\n    key: \"A\",\r\n    name: \"A\"\r\n  },\r\n  {\r\n    key: \"B\",\r\n    name: \"B\"\r\n  },\r\n  {\r\n    key: \"C\",\r\n    name: \"C\"\r\n  },\r\n  {\r\n    key: \"D\",\r\n    name: \"D\"\r\n  },\r\n  {\r\n    key: \"E\",\r\n    name: \"E\"\r\n  },\r\n  {\r\n    key: \"F\",\r\n    name: \"F\"\r\n  },\r\n  {\r\n    key: \"G\",\r\n    name: \"G\"\r\n  },\r\n  {\r\n    key: \"H\",\r\n    name: \"H\"\r\n  },\r\n  {\r\n    key: \"I\",\r\n    name: \"I\"\r\n  },\r\n  {\r\n    key: \"J\",\r\n    name: \"J\"\r\n  },\r\n  {\r\n    key: \"K\",\r\n    name: \"K\"\r\n  },\r\n  {\r\n    key: \"L\",\r\n    name: \"L\"\r\n  },\r\n  {\r\n    key: \"M\",\r\n    name: \"M\"\r\n  },\r\n  {\r\n    key: \"N\",\r\n    name: \"N\"\r\n  },\r\n  {\r\n    key: \"O\",\r\n    name: \"O\"\r\n  },\r\n  {\r\n    key: \"P\",\r\n    name: \"P\"\r\n  },\r\n  {\r\n    key: \"Q\",\r\n    name: \"Q\"\r\n  },\r\n  {\r\n    key: \"R\",\r\n    name: \"R\"\r\n  },\r\n  {\r\n    key: \"S\",\r\n    name: \"S\"\r\n  },\r\n  {\r\n    key: \"T\",\r\n    name: \"T\"\r\n  },\r\n  {\r\n    key: \"U\",\r\n    name: \"U\"\r\n  },\r\n  {\r\n    key: \"V\",\r\n    name: \"V\"\r\n  },\r\n  {\r\n    key: \"W\",\r\n    name: \"W\"\r\n  },\r\n  {\r\n    key: \"X\",\r\n    name: \"X\"\r\n  },\r\n  {\r\n    key: \"Y\",\r\n    name: \"Y\"\r\n  },\r\n  {\r\n    key: \"Z\",\r\n    name: \"Z\"\r\n  }\r\n];\r\n\r\nexport {\r\n    baseURL,\r\n    instance,\r\n    categoryTypes,\r\n    alphaTypes\r\n}","import { instance } from './config';\r\n\r\nexport const getBannerRequest = () => {\r\n    return instance.get('/banner')\r\n}\r\n\r\nexport const getRecommendListRequest = () => {\r\n    return instance.get ('/personalized');\r\n}\r\n\r\nexport const getHotSingerListRequest = (count) => {\r\n  return instance.get(`/top/artists?offset=${count}`);\r\n}\r\n\r\nexport const getSingerListRequest= (category, alpha, count) => {\r\n  return instance.get(`/artist/list?cat=${category}&initial=${alpha.toLowerCase()}&offset=${count}`);\r\n}\r\n\r\nexport const getRankListRequest = () => {\r\n  return instance.get('/toplist/detail');\r\n}\r\n\r\nexport const getAlbumDetailRequest = id => {\r\n  return instance.get (`/playlist/detail?id=${id}`);\r\n};\r\n\r\nexport const getSingerInfoRequest = id => {\r\n  return instance.get (`/artists?id=${id}`);\r\n};\r\n\r\nexport const getHotKeyWordsRequest = () => {\r\n  return instance.get (`/search/hot`);\r\n};\r\n\r\nexport const getSuggestListRequest = query => {\r\n  return instance.get (`/search/suggest?keywords=${query}`);\r\n};\r\n\r\nexport const getResultSongsListRequest = query => {\r\n  return instance.get (`/search?keywords=${query}`);\r\n};","import {\r\n    CHANGE_BANNER,\r\n    CHANGE_RECOMMEND_LIST,\r\n    CHANGE_ENTER_LOADING\r\n} from './constants'\r\nimport { fromJS } from 'immutable';// 将 JS 对象转换成 immutable 对象\r\nimport { getBannerRequest, getRecommendListRequest } from '../../../api/require';\r\n\r\nconst changeBannerList = data => ({\r\n    type: CHANGE_BANNER,\r\n    data: fromJS(data)\r\n})\r\n\r\nconst changeRecommendList = (data) => ({\r\n    type: CHANGE_RECOMMEND_LIST,\r\n    data: fromJS(data)\r\n})\r\n\r\nconst changeEnterLoading = (data) => ({\r\n  type: CHANGE_ENTER_LOADING,\r\n  data\r\n});\r\n\r\nexport const getBannerListAction = (dispatch) => {\r\n    getBannerRequest()\r\n        .then(data => dispatch(changeBannerList(data.banners.map(item => item.imageUrl))))\r\n        .catch(e => console.log('轮播图数据请求出错：',e))\r\n}\r\n\r\nexport const getRecommendListAction = (dispatch) => {\r\n    getRecommendListRequest()\r\n        .then(data => {\r\n            dispatch(changeRecommendList(data.result))\r\n            dispatch (changeEnterLoading (false));\r\n        })\r\n        .catch(e => console.log('推荐列表请求出错：',e))\r\n}\r\n\r\n","import React, { useEffect } from 'react';\r\nimport Swiper from '../../components/swiper';\r\nimport RecommendList from '../../components/recommendList';\r\nimport Scroll from '../../components/scroll'\r\nimport { WholeContainer, Content, SwiperContainer } from './style';\r\nimport { connect } from 'react-redux';\r\nimport {\r\n\tgetBannerListAction,\r\n\tgetRecommendListAction\r\n} from '../../application/Recommend/store/actionCreator';\r\nimport { forceCheck } from 'react-lazyload';\r\nimport Loading from '../../baseUI/loading/index';\r\nimport { Outlet } from 'react-router';\r\n\r\nfunction Recommend (props) {\r\n\r\n\tconst { bannerList, recommendList, enterLoading} = props;\r\n\tconst { getBannerListDispatch, getRecommendListDispatch } = props;\r\n\tuseEffect(() => {\r\n\t\tif (!bannerList.size){\r\n\t\t\tgetBannerListDispatch ();\r\n\t\t}\r\n\t\tif (!recommendList.size){\r\n\t\t\tgetRecommendListDispatch ();\r\n\t\t}\r\n\t});\r\n\tconst bannerListJS = bannerList ? bannerList.toJS () : [];\r\n\tconst recommendListJS = recommendList ? recommendList.toJS () :[];\r\n\t\r\n\treturn (\r\n\t\t<Content>\r\n\t\t\t<Scroll onScroll={forceCheck}>\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<div className=\"before\"></div>\r\n\t\t\t\t\t<WholeContainer>\r\n\t\t\t\t\t\t<SwiperContainer>\r\n\t\t\t\t\t\t\t<Swiper \r\n\t\t\t\t\t\t\t\tlist={bannerListJS} \r\n\t\t\t\t\t\t\t\tslideButton={false}\r\n\t\t\t\t\t\t\t\tpaginationActiveColor='#d44439'\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</SwiperContainer>\r\n\t\t\t\t\t</WholeContainer>\r\n\t\t\t\t\t<RecommendList recommendList={recommendListJS}/>\r\n\t\t\t\t</div>\r\n\t\t\t</Scroll>\r\n\t\t\t{enterLoading && <Loading/>}\r\n\t\t\t<Outlet/>\r\n\t\t</Content>\r\n\t)\r\n}\r\n\r\nconst mapState = (state) => ({\r\n\tbannerList: state.getIn(['recommend', 'bannerList']),\r\n\trecommendList: state.getIn(['recommend', 'recommendList']),\r\n\tenterLoading: state.getIn(['recommend', 'enterLoading']),\r\n})\r\n\r\nconst mapDispatch = (dispatch) => ({\r\n\tgetBannerListDispatch() {\r\n        dispatch(getBannerListAction);\r\n\t},\r\n    getRecommendListDispatch() {\r\n        dispatch(getRecommendListAction);\r\n    }\r\n})\r\n\r\nexport default connect(mapState, mapDispatch)(Recommend);","import styled from'styled-components';\r\nimport style from '../../assets/global-style';\r\n\r\nexport const List = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n  height: 30px;\r\n  overflow: hidden;\r\n  width: fit-content;\r\n  >span:first-of-type {\r\n    display: block;\r\n    flex: 0 0 auto;\r\n    padding: 5px 0;\r\n    margin-right: 5px;\r\n    color: grey;\r\n    font-size: ${style[\"font-size-m\"]};\r\n  }\r\n`\r\nexport const ListItem = styled.span`\r\n  flex: 0 0 auto;\r\n  font-size: ${style[\"font-size-m\"]};\r\n  padding: 5px 8px;\r\n  border-radius: 10px;\r\n  &.selected {\r\n    color: ${style[\"theme-color\"]};\r\n    border: 1px solid ${style[\"theme-color\"]};\r\n    opacity: 0.8;\r\n  }\r\n`","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport Scroll from '../../components/scroll';\r\nimport { List, ListItem } from './style';\r\n\r\n\r\nfunction Horizon(props) {\r\n    const {\r\n        list,\r\n        currentItem,\r\n        title,\r\n        handleClick,\r\n    } = props;\r\n    return (\r\n        <Scroll direction=\"horizental\">\r\n            <List>\r\n                <span>{title}</span>\r\n                {\r\n                    list.map((item) => (\r\n                        <ListItem\r\n                            key={item.key}\r\n                            className={`${currentItem === item.key ? 'selected': ''}`} \r\n                            onClick={() => handleClick (item.key)}\r\n                        >{item.name}</ListItem>\r\n                    ))\r\n                }\r\n            </List>\r\n        </Scroll>\r\n    )\r\n}\r\n\r\nHorizon.propTypes = {\r\n    list: PropTypes.array,          // 接收的列表数据\r\n    currentItem: PropTypes.string,  //当前元素\r\n    title: PropTypes.string,        // 列表左边的标题\r\n    handleClick: PropTypes.func,    // 点击不同item时执行的方法\r\n}\r\n\r\nHorizon.defaultProps = {\r\n    list: [],\r\n    currentItem: '',\r\n    title: '',\r\n    handleClick: null,\r\n}\r\n\r\nexport default Horizon;","import styled from'styled-components';\r\nimport style from '../../assets/global-style';\r\n\r\nexport const NavContainer  = styled.div`\r\n    box-sizing: border-box;\r\n    position: fixed;\r\n    top: 95px;\r\n    width: 100%;\r\n    padding: 5px;\r\n    overflow: hidden;\r\n`;\r\nexport const ListContainer = styled.div`\r\n  position: fixed;\r\n  top: 160px;\r\n  left: 0;\r\n  bottom: 0;\r\n  overflow: hidden;\r\n  width: 100%;\r\n`;\r\nexport const List = styled.div`\r\n  display: flex;\r\n  margin: auto;\r\n  flex-direction: column;\r\n  overflow: hidden;\r\n  .title {\r\n    margin:10px 0 10px 10px;\r\n    color: ${style[\"font-color-desc\"]};\r\n    font-size: ${style[\"font-size-s\"]};\r\n  }\r\n`;\r\nexport const ListItem = styled.div`\r\n  box-sizing: border-box;\r\n  display: flex;\r\n  flex-direction: row;\r\n  margin: 0 5px;\r\n  padding: 5px 0;\r\n  align-items: center;\r\n  border-bottom: 1px solid ${style[\"border-color\"]};\r\n  .img_wrapper {\r\n    margin-right: 20px;\r\n    img {\r\n      border-radius: 3px;\r\n      width: 50px;\r\n      height: 50px;\r\n    }\r\n  }\r\n  .name {\r\n    font-size: ${style[\"font-size-m\"]};\r\n    color: ${style[\"font-color-desc\"]};\r\n    font-weight: 500;\r\n  }\r\n`;","export const CHANGE_SINGER_LIST = 'singers/CHANGE_SINGER_LIST';\r\nexport const CHANGE_PAGE_COUNT = 'singers/PAGE_COUNT';\r\nexport const CHANGE_ENTER_LOADING = 'singers/ENTER_LOADING';\r\nexport const CHANGE_PULLUP_LOADING = 'singers/PULLUP_LOADING';\r\nexport const CHANGE_PULLDOWN_LOADING = 'singers/PULLDOWN_LOADING';","import {\r\n  getHotSingerListRequest,\r\n  getSingerListRequest\r\n} from \"../../../api/require\";\r\nimport {\r\n  CHANGE_SINGER_LIST,\r\n  CHANGE_PAGE_COUNT,\r\n  CHANGE_PULLUP_LOADING,\r\n  CHANGE_PULLDOWN_LOADING,\r\n  CHANGE_ENTER_LOADING\r\n} from './constants';\r\nimport {\r\n  fromJS\r\n} from 'immutable';\r\n\r\nconst changeSingerList = (data) => ({\r\n  type: CHANGE_SINGER_LIST,\r\n  data: fromJS(data)\r\n});\r\n\r\nexport const changePageCount = (data) => ({\r\n  type: CHANGE_PAGE_COUNT,\r\n  data\r\n});\r\n\r\n//进场loading\r\nexport const changeEnterLoading = (data) => ({\r\n  type: CHANGE_ENTER_LOADING,\r\n  data\r\n});\r\n\r\n//滑动最底部loading\r\nexport const changePullUpLoading = (data) => {\r\n  return {\r\n    type: CHANGE_PULLUP_LOADING,\r\n\t  data\r\n  }\r\n};\r\n\r\n//顶部下拉刷新loading\r\nexport const changePullDownLoading = (data) => {\r\n  return {\r\n    type: CHANGE_PULLDOWN_LOADING,\r\n\t  data\r\n  }\r\n};\r\n\r\nexport const getHotSingerList = () => (dispatch) => {\r\n    getHotSingerListRequest(0)\r\n    .then(res => {\r\n        dispatch(changeSingerList(res.artists));\r\n        dispatch(changeEnterLoading(false));\r\n        dispatch(changePullUpLoading(false));\r\n        dispatch(changePullDownLoading(false));\r\n    })\r\n    .catch(e => console.log(`获取热门歌手数据出错：${e}`))\r\n}\r\n\r\nexport const refreshMoreHotSingerList = () =>\r\n\t(dispatch, getState) => {\r\n    \tconst pageCount = getState().getIn(['singers', 'pageCount']);\r\n    \tconst singerList = getState().getIn(['singers', 'singerList']).toJS();\r\n    \tgetHotSingerListRequest(pageCount)\r\n    \t.then(res => {\r\n    \t    // 连接已有数据和新数据\r\n    \t    const data = singerList.concat(res.artists);\r\n    \t    dispatch(changeSingerList(data));\r\n    \t    dispatch(changePullUpLoading(false));\r\n          dispatch(changePullDownLoading(false));\r\n    \t}).catch(() => {\r\n    \t    console.log('热门歌手数据获取失败');\r\n    \t});\r\n\t}\r\n\r\n//第一次加载对应类别的歌手\r\nexport const getSingerList = (category, alpha) => {\r\n    return (dispatch, getState) => {\r\n        getSingerListRequest(category, alpha, 0).then(res => {\r\n            const data = res.artists;\r\n            dispatch(changeSingerList(data));\r\n            dispatch(changeEnterLoading(false));\r\n            dispatch(changePullDownLoading(false));\r\n        }).catch(() => {\r\n            console.log('加载对应类别的歌手数据获取失败');\r\n        });\r\n    }\r\n};\r\n\r\n//加载更多歌手\r\nexport const refreshMoreSingerList = (category, alpha) => {\r\n    return (dispatch, getState) => {\r\n        const pageCount = getState().getIn(['singers', 'pageCount']);\r\n        const singerList = getState().getIn(['singers', 'singerList']).toJS();\r\n        getSingerListRequest(category, alpha, pageCount).then(res => {\r\n            const data = [...singerList, ...res.artists];\r\n            dispatch(changeSingerList(data));\r\n            dispatch(changePullUpLoading(false));\r\n        }).catch(() => {\r\n            console.log('加载更多歌手数据获取失败');\r\n        });\r\n    }\r\n};","import React, { useState, useEffect } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { useNavigate } from 'react-router';\r\n\r\nimport { categoryTypes, alphaTypes } from '../../api/config';\r\nimport Horizon from '../../baseUI/horizonItem';\r\nimport Scroll from '../../components/scroll';\r\nimport Loading from '../../baseUI/loading';\r\nimport { \r\n  NavContainer,\r\n  ListContainer,\r\n  List,\r\n  ListItem\r\n} from \"./style\";\r\nimport { \r\n  getSingerList, \r\n  getHotSingerList, \r\n  changeEnterLoading, \r\n  changePageCount, \r\n  refreshMoreSingerList, \r\n  changePullUpLoading, \r\n  changePullDownLoading, \r\n  refreshMoreHotSingerList \r\n} from './store/actionCreators';\r\nimport { Outlet } from 'react-router';\r\n\r\nfunction Singers (props) {\r\n\tconst [category, setCategory] = useState ('');\r\n\tconst [alpha, setAlpha] = useState ('');\r\n\tconst nav = useNavigate();\r\n\tconst { \r\n\t\tupdateDispatch,\r\n\t\tgetHotSingerDispatch,\r\n\t\tpullUpRefreshDispatch,\r\n\t\tpullDownRefreshDispatch,\r\n\t\tpageCount,\r\n\t\tpullUpLoading,\r\n\t\tpullDownLoading,\r\n\t\tenterLoading,\r\n\t\tsingerList = []\r\n\t} = props;\r\n\tconst handleUpdateAlpha = (val) => {\r\n\t\tsetAlpha (val);\r\n\t\tupdateDispatch(category, val);\r\n\t}\r\n\tconst handleUpdateCatetory = (val) => {\r\n\t\tsetCategory (val);\r\n\t\tupdateDispatch(val, alpha);\r\n\t}\r\n\tuseEffect(() => {\r\n\t\tgetHotSingerDispatch();\r\n\t},[getHotSingerDispatch]);\r\n\r\n\t// 歌手列表\r\n\tconst singerListElement = (\r\n\t\t<List>\r\n\t\t\t{\r\n\t\t\t\tsingerList.toJS().map((item, index) => (\r\n\t\t\t\t\t<ListItem key={item.accountId+\"\"+index} onClick={() => nav(`${item.id}`)}>\r\n\t\t\t\t\t\t<div className=\"img_wrapper\">\r\n\t\t\t\t\t\t\t<img \r\n\t\t\t\t\t\t\t\tsrc={`${item.picUrl}?param=300x300`} \r\n\t\t\t\t\t\t\t\twidth=\"100%\" \r\n\t\t\t\t\t\t\t\theight=\"100%\" \r\n\t\t\t\t\t\t\t\talt=\"music\"\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<span className=\"name\">{item.name}</span>\r\n\t\t\t\t\t</ListItem>\r\n\t\t\t\t))\r\n\t\t\t}\r\n\t\t</List>\r\n\t)\r\n\r\n  \treturn (\r\n\t\t<>\r\n\t\t\t<NavContainer>\r\n\t\t\t\t<Horizon \r\n\t\t\t\t\tlist={categoryTypes} \r\n\t\t\t\t\ttitle={\"分类 (默认热门):\"}\r\n\t\t\t\t\thandleClick={val => handleUpdateCatetory(val)}\r\n\t\t\t\t\tcurrentItem={category}\r\n\t\t\t\t/>\r\n\t\t\t\t<Horizon \r\n\t\t\t\t\tlist={alphaTypes} \r\n\t\t\t\t\ttitle={\"首字母:\"}\r\n\t\t\t\t\thandleClick={val => handleUpdateAlpha (val)}\r\n\t\t\t\t\tcurrentItem={alpha}\r\n\t\t\t\t/>\r\n\t\t\t</NavContainer>\r\n\t\t\t<ListContainer>\r\n\t\t\t\t{ enterLoading && <Loading/>}\r\n\t\t\t\t<Scroll \r\n\t\t\t\t\tpullUp={() => pullUpRefreshDispatch(category, alpha, category===''&&alpha==='', pageCount)} \r\n\t\t\t\t\tpullDown={() => pullDownRefreshDispatch(category, alpha)}\r\n\t\t\t\t\tpullUpLoading = { pullUpLoading }\r\n  \t\t\t\t\tpullDownLoading = { pullDownLoading }\r\n\t\t\t\t>{singerListElement}</Scroll>\r\n\t\t\t</ListContainer>\r\n\t\t\t<Outlet/>\r\n\t\t</>\r\n  \t)\r\n}\r\n\r\nconst mapState = (state) => ({\r\n\tsingerList: state.getIn(['singers', 'singerList']),\r\n\tenterLoading: state.getIn(['singers', 'enterLoading']),\r\n\tpullUpLoading: state.getIn(['singers', 'pullUpLoading']),\r\n\tpullDownLoading: state.getIn(['singers', 'pullDownLoading']),\r\n\tpageCount: state.getIn(['singers', 'pageCount'])\r\n})\r\n\r\nconst mapDispatch = (dispatch) => ({\r\n    getHotSingerDispatch() {\r\n      \tdispatch(getHotSingerList());\r\n    },\r\n    updateDispatch(category, alpha) {\r\n\t\tdispatch(changePageCount(0));//由于改变了分类，所以pageCount清零\r\n\t\tdispatch(changeEnterLoading(true));//loading，现在实现控制逻辑，效果实现放到下一节，后面的loading同理\r\n\t\tdispatch(getSingerList(category, alpha));\r\n    },\r\n    // 滑到最底部刷新部分的处理\r\n    pullUpRefreshDispatch(category, alpha, hot, count) {\r\n\t\tdispatch(changePullUpLoading(true));\r\n\t\tdispatch(changePageCount(count+1));\r\n\t\tif(hot){\r\n\t\t\tdispatch(refreshMoreHotSingerList());\r\n\t\t} else {\r\n\t\t\tdispatch(refreshMoreSingerList(category, alpha));\r\n\t\t}\r\n    },\r\n    //顶部下拉刷新\r\n    pullDownRefreshDispatch(category, alpha) {\r\n\t\tdispatch(changePullDownLoading(true));\r\n\t\tdispatch(changePageCount(0));//属于重新获取数据\r\n\t\tif(category === '' && alpha === ''){\r\n\t\t\tdispatch(getHotSingerList());\r\n\t\t} else {\r\n\t\t\tdispatch(getSingerList(category, alpha));\r\n\t\t}\r\n    }\r\n});\r\n\r\nexport default connect(mapState, mapDispatch)(React.memo(Singers));","import { fromJS } from \"immutable\";\r\nimport { getRankListRequest } from \"../../../api/require\";\r\n\r\n// action常量\r\nexport const CHANGE_RANK_LIST = 'home/rank/CHANGE_RANK_LIST';\r\nexport const CHANGE_LOADING = 'home/rank/CHANGE_LOADING';\r\n\r\n// action creator\r\nconst changeRankList = (data) => ({\r\n    type: CHANGE_RANK_LIST,\r\n    data,\r\n})\r\n\r\nconst changeLoading = (data) => ({\r\n    type: CHANGE_LOADING,\r\n    data\r\n})\r\n\r\nexport const getRankList = () => {\r\n    return (dispatch) => {\r\n        getRankListRequest()\r\n        .then(data => {\r\n            const {list=[]} = data;\r\n            dispatch(changeRankList(fromJS(list)));\r\n            dispatch(changeLoading(false));\r\n        })\r\n        .catch(e => console.log('获取排行榜数据出错', e));\r\n    }\r\n    \r\n}\r\n\r\nconst defaultState = fromJS({\r\n    rankList: [],\r\n    isLoading: true,\r\n})\r\n\r\nexport const reducer = (state = defaultState, action) => {\r\n    switch(action.type){\r\n        case(CHANGE_RANK_LIST):\r\n            return state.set('rankList', action.data);\r\n        case(CHANGE_LOADING):\r\n            return state.set('isLoading', action.data);\r\n        default:\r\n            return state;\r\n    }\r\n}","import styled from \"styled-components\";\r\nimport style from \"../../assets/global-style\";\r\n\r\nexport const Title = styled.p`\r\n    font-weight: bold;\r\n    margin: 4px 0 10px;\r\n`\r\n\r\nexport const OfficialRankContainer = styled.div`\r\n    display: flex;\r\n    width: 100%;\r\n    height: 128px;\r\n    border-bottom: 1px solid ${style[\"border-color\"]};\r\n    .list_container {\r\n        display: flex;\r\n        flex-direction: column;\r\n        justify-content: space-around;\r\n        overflow: hidden;\r\n        .item {\r\n            width: 100%;\r\n            color: ${style['font-color-desc']};\r\n            font-size: 14px;\r\n            margin-left: 10px;\r\n            text-overflow: ellipsis;\r\n            overflow: hidden;\r\n            white-space: nowrap;\r\n        }\r\n    }\r\n`\r\n\r\nexport const Frequency = styled.div`\r\n    position: absolute;\r\n    bottom: 10px;\r\n    left: 10px;\r\n    color: ${style['font-color-light']};\r\n`\r\n\r\nexport const GlobalRankContainer = styled.div`\r\n    display: flex;\r\n    width: 100vw;\r\n    flex-wrap: wrap;\r\n    justify-content: space-around;\r\n    .item {\r\n        width: 32vw;\r\n        overflow: hidden;\r\n        position: relative;\r\n        margin-bottom: 4px;\r\n        img {\r\n            width: 100%;\r\n            height: 100%;\r\n        }\r\n    }\r\n`","import React, { useEffect } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { Outlet, useNavigate } from 'react-router';\r\nimport { getRankList } from './store';\r\nimport { filterIndex } from '../../api/utils';\r\nimport {\r\n  Title,\r\n  OfficialRankContainer,\r\n  GlobalRankContainer,\r\n  Frequency,\r\n} from './style';\r\n\r\nfunction Rank (props) {\r\n  const {\r\n    rankList,\r\n    getRankListDispatch\r\n  } = props;\r\n  const list = rankList.toJS();\r\n\r\n  useEffect(() => {\r\n    getRankListDispatch();\r\n  });\r\n\r\n  const globalStartIndex = filterIndex (list);\r\n  const officialList = list.slice (0, globalStartIndex);\r\n  const globalList = list.slice (globalStartIndex);\r\n\r\n  const nav = useNavigate();\r\n\r\n  const officialRankList = officialList.map((item) => (\r\n    <div \r\n      style={{position: 'relative'}} \r\n      key={item.ToplistType} \r\n      onClick={() => nav(`${item.id}`)}\r\n    >\r\n      <OfficialRankContainer>\r\n        <img src={item.coverImgUrl} alt={item.name} />\r\n        <Frequency>{item.updateFrequency}</Frequency>\r\n        <div className=\"list_container\">\r\n          {item.tracks.map((i, index)  => <div className='item' key={index}>{index}. {i.first} - {i.second}</div>)}\r\n        </div>\r\n      </OfficialRankContainer>\r\n    </div>\r\n  ));\r\n\r\n  const globalRankList = globalList.map((item,index) => (\r\n    <div className=\"item\"  key={index}>\r\n      <img src={item.coverImgUrl} alt={item.name} />\r\n      <Frequency>{item.updateFrequency}</Frequency>\r\n    </div>\r\n  ))\r\n\r\n  return (\r\n    <>\r\n      <div>\r\n        <Title>官方榜</Title>\r\n        {officialRankList}\r\n        <Title>全球榜</Title>\r\n        <GlobalRankContainer>\r\n          {globalRankList}\r\n        </GlobalRankContainer>\r\n      </div>\r\n      <Outlet/>\r\n    </>\r\n  )\r\n}\r\n\r\nconst mapState = (state) => ({\r\n  rankList: state.getIn(['rank', 'rankList']),\r\n  isLoading: state.getIn(['rank', 'isLoading'])\r\n})\r\n\r\nconst mapDispatch = (dispatch) => ({\r\n  getRankListDispatch() {\r\n    dispatch(getRankList());\r\n  }\r\n})\r\n\r\nexport default connect(mapState, mapDispatch)(Rank);","import styled from'styled-components';\r\nimport style from '../../assets/global-style';\r\n\r\nexport const Container = styled.div`\r\n  position: fixed;\r\n  top: 0;\r\n  left: 0;\r\n  right: 0;\r\n  bottom: 0;\r\n  z-index: 100;\r\n  background: #fff;\r\n`\r\n\r\nexport const TopContainer = styled.div`\r\n  height: 36vh;\r\n  overflow: hidden;\r\n  position: relative;\r\n  .content {\r\n    display: flex;\r\n    margin-top: 60px;\r\n    height: 20vh;\r\n    .left_box {\r\n      margin-left: 10%;\r\n      height: 100%;\r\n      width: 30%;\r\n      position: relative;\r\n      display: flex;\r\n      align-items: center;\r\n      img {\r\n        height: 80%;\r\n      }\r\n      .frequency {\r\n        position: absolute;\r\n        top: 14px;\r\n        right: 10px;\r\n        color: ${style['font-color-light']};\r\n      }\r\n    }\r\n    .right_box {\r\n      display: flex;\r\n      flex-direction: column;\r\n      justify-content: space-around;\r\n      width: 70%;\r\n      height: 100%;\r\n      overflow: hidden;\r\n      margin-left: 10px;\r\n      color: ${style['font-color-light']};\r\n      .avatar {\r\n        display: flex;\r\n        align-items: center;\r\n        color: ${style['font-color-desc-v2']};\r\n        img{\r\n          height: 1rem;\r\n          width: 1rem;\r\n          margin-right: 2px;\r\n        }\r\n      }\r\n    }\r\n  }\r\n  .button_bar {\r\n    display: flex;\r\n    justify-content: space-around;\r\n    color: ${style['font-color-light']};\r\n    .btn {\r\n      width: 40px;\r\n      display: flex;\r\n      flex-direction: column;\r\n      align-items: center;\r\n      i {\r\n        width: 16px;\r\n        height: 16px;\r\n      }\r\n    }\r\n  }\r\n`\r\n\r\nexport const TopBackground = styled.div`\r\n  height: 100%;\r\n  width: 100%;\r\n  z-index: -1;\r\n  background-image: url(${props => `${props.background}`});\r\n  background-size: 100% 100%;\r\n  position: absolute;\r\n  filter: blur(10px);\r\n`","export const CHANGE_CURRENT_ALBUM = 'album/CHANGE_CURRENT_ALBUM';\r\nexport const CHANGE_IS_LOADING = 'album/CHANGE_IS_LOADING';","import{\r\n  CHANGE_CURRENT_ALBUM,\r\n  CHANGE_IS_LOADING\r\n} from './constants';\r\nimport { getAlbumDetailRequest } from '../../../api/require';\r\nimport { fromJS } from 'immutable';\r\n\r\nconst changeCurrentAlbum = (data) => ({\r\n  type: CHANGE_CURRENT_ALBUM,\r\n  data: fromJS (data)\r\n});\r\n\r\nexport const getAlbumList = (id) => {\r\n  return dispatch => {\r\n    getAlbumDetailRequest(id)\r\n    .then(res => {\r\n      dispatch (changeCurrentAlbum (res.playlist));\r\n      dispatch (changeIsLoading (false));\r\n    })\r\n    .catch(e => console.log('专辑详情请求错误：',e))\r\n  }\r\n}\r\n\r\nexport const changeIsLoading = (data) => ({\r\n  type: CHANGE_IS_LOADING,\r\n  data\r\n});","import React from \"react\";\r\nimport styled from 'styled-components';\r\n\r\nconst Container = styled.div`\r\n  position: fixed;\r\n  top: 0;\r\n  left: 0;\r\n  right: 0;\r\n  bottom: 0;\r\n  z-index: 100;\r\n  background: #fff;\r\n`\r\n\r\nexport default function FixedContainer(props) {\r\n    return <Container className='animate__animated animate__bounceInRight'>{props.children}</Container>\r\n}","import styled, { keyframes } from 'styled-components';\r\n\r\nconst move = keyframes`\r\n  from {\r\n\t\ttransform: translateX(80%);\r\n  }\r\n\tto {\r\n\t\ttransform: translateX(-80%);\r\n\t}\r\n`\r\n\r\nexport const Container = styled.div`\r\n\twidth: 100%;\r\n\theight: 100%;\r\n\toverflow: hidden;\r\n\t.content {\r\n\t\tanimation: ${move} 8s infinite;\r\n\t}\r\n`","import React from 'react';\r\nimport {\r\n\tContainer\r\n} from './style';\r\n\r\nconst Marquee = (props) => {\r\n\t\r\n\treturn (\r\n\t\t<Container>\r\n\t\t\t<div className='content'>{props.children}</div>\r\n\t\t</Container>\r\n\t)\r\n}\r\n\r\nexport default Marquee;","import React from 'react';\r\nimport styled from'styled-components';\r\nimport style from '../../assets/global-style';\r\nimport PropTypes from \"prop-types\";\r\nimport Marquee from '../marquee';\r\n\r\nconst HeaderContainer = styled.div`\r\n  position: fixed;\r\n  padding-left: 5px;\r\n  height: 40px;\r\n  width: 100%;\r\n  z-index: 100;\r\n  display: flex;\r\n  line-height: 40px;\r\n  background-color: ${style['theme-color']};\r\n  color: ${style[\"font-color-light\"]};\r\n  .back {\r\n    margin-right: 5px;\r\n    font-size: 20px;\r\n    width: 20px;\r\n  }\r\n  >h1 {\r\n    font-size: ${style[\"font-size-l\"]};\r\n    font-weight: 700;\r\n    margin-left: 6px;\r\n  }\r\n`\r\n// 处理函数组件拿不到 ref 的问题，所以用 forwardRef\r\nconst Header = (props) => {\r\n  const { handleClick, title, moveY, marqueeContent} = props;\r\n  // moveY ∈ [-90, -10]; opacity ∈ [0,1];\r\n  const headerStyle = () => {\r\n    const style = {\r\n      backgroundColor: `rgba(212,68,57, 0)`,\r\n    }\r\n    if(moveY < -90) {\r\n      style.backgroundColor = `rgba(212,68,57, 1)`;\r\n    }\r\n    else if(moveY < -10) {\r\n      style.backgroundColor = `rgba(212,68,57, ${(-1 / 80) * moveY - 1/8})` ;\r\n    }\r\n    return style;\r\n  }\r\n  const renderContent = () => {\r\n    if(moveY > -90) {\r\n      return <h1>{title}</h1>\r\n    }else {\r\n      return <Marquee>{marqueeContent}</Marquee>\r\n    }\r\n  }\r\n  return (\r\n    <HeaderContainer style={headerStyle()}>\r\n      <i className=\"iconfont icon-fanhui\"  onClick={handleClick}/>\r\n      {renderContent()}\r\n    </HeaderContainer>\r\n  )\r\n}\r\n\r\nHeader.defaultProps = {\r\n  handleClick: () => {},\r\n  title: \"标题\",\r\n  moveY: 0,\r\n  marqueeContent: '滚动标题'\r\n};\r\n\r\nHeader.propTypes = {\r\n  handleClick: PropTypes.func,\r\n  title: PropTypes.string,\r\n  moveY: PropTypes.number,\r\n  marqueeContent: PropTypes.string\r\n};\r\n\r\nexport default Header;","import styled from'styled-components';\r\nimport style from '../../assets/global-style';\r\n\r\nexport const ListItem = styled.div`\r\n  width: 100%;\r\n  height: 60px;\r\n  display: flex;\r\n  ${props => props.showBackground ? `background: ${style[\"highlight-background-color\"]}`: \"\"}\r\n  .number {\r\n    height: 100%;\r\n    width: 20%;\r\n    ${style.flex}\r\n    font-size: ${style['font-size-ll']};\r\n  }\r\n  .song {\r\n    height: 100%;\r\n    width: 80%;\r\n    border-bottom: 1px solid ${style['border-color']};\r\n    display: flex;\r\n    flex-direction: column;\r\n    justify-content: space-around;\r\n    p {\r\n      ${style['noWrap']}\r\n    }\r\n    p:first-child {\r\n      font-size: ${style['font-size-ll']};\r\n      height: 22px;\r\n    }\r\n    p:last-child {\r\n      font-size: ${style['font-size-m']};\r\n      color: ${style['font-color-desc-v2']};\r\n    }\r\n  }\r\n`\r\n\r\nexport const ListHeader = styled.div`\r\n  display: flex;\r\n  height: 60px;\r\n  width: 100%;\r\n  border-bottom: 1px solid ${style['border-color']};\r\n  div {\r\n    display: flex;\r\n    align-items: center;\r\n  }\r\n  div:first-child {\r\n    width: 60%;\r\n    font-size: large;\r\n    i {\r\n      margin-left: 20px;\r\n      margin-right: 10px;\r\n    }\r\n    span {\r\n      font-size: small;\r\n      color: ${style['font-color-desc-v2']};\r\n    }\r\n  }\r\n  div:nth-child(2) {\r\n    width: 40%;\r\n    background-color: ${style['theme-color']};\r\n    justify-content: center;\r\n    color: ${style['font-color-light']};\r\n    border-radius: 8px;\r\n  }\r\n`","export const SET_CURRENT_SONG = 'player/SET_CURRENT_SONG';\r\nexport const SET_FULL_SCREEN = 'player/SET_FULL_SCREEN';\r\nexport const SET_PLAYING_STATE = 'player/SET_PLAYING_STATE';\r\nexport const SET_SEQUECE_PLAYLIST = 'player/SET_SEQUECE_PLAYLIST';\r\nexport const SET_PLAYLIST = 'player/SET_PLAYLIST';\r\nexport const SET_PLAY_MODE = 'player/SET_PLAY_MODE';\r\nexport const SET_CURRENT_INDEX = 'player/SET_CURRENT_INDEX';\r\nexport const SET_SHOW_PLAYLIST = 'player/SET_SHOW_PLAYLIST';\r\nexport const DELETE_SONG = 'player/DELETE_SONG';","import { \r\n  SET_CURRENT_SONG, \r\n  SET_FULL_SCREEN, \r\n  SET_PLAYING_STATE, \r\n  SET_SEQUECE_PLAYLIST, \r\n  SET_PLAYLIST, \r\n  SET_PLAY_MODE, \r\n  SET_CURRENT_INDEX, \r\n  SET_SHOW_PLAYLIST, \r\n  DELETE_SONG,\r\n} from './constants';\r\nimport { fromJS } from 'immutable';\r\n\r\nexport const changeCurrentSong = (data) => ({\r\n  type: SET_CURRENT_SONG,\r\n  data: fromJS (data)\r\n});\r\n\r\nexport const changeFullScreen =  (data) => ({\r\n  type: SET_FULL_SCREEN,\r\n  data\r\n});\r\n\r\nexport const changePlayingState = (data) => ({\r\n  type: SET_PLAYING_STATE,\r\n  data\r\n});\r\n\r\nexport const changeSequecePlayList = (data) => ({\r\n  type: SET_SEQUECE_PLAYLIST,\r\n  data: fromJS (data)\r\n});\r\n\r\nexport const changePlayList  = (data) => ({\r\n  type: SET_PLAYLIST,\r\n  data: fromJS (data)\r\n});\r\n\r\nexport const changePlayMode = (data) => ({\r\n  type: SET_PLAY_MODE,\r\n  data\r\n});\r\n\r\nexport const changeCurrentIndex = (data) => ({\r\n  type: SET_CURRENT_INDEX,\r\n  data\r\n});\r\n\r\nexport const changeShowPlayList = (data) => ({\r\n  type: SET_SHOW_PLAYLIST,\r\n  data\r\n});\r\n\r\nexport const deleteSongFromList = (data) => ({\r\n  type:DELETE_SONG,\r\n  data\r\n})","import React from \"react\"\r\nimport { ListItem, ListHeader } from \"./style\";\r\nimport { getName, getCount } from \"../../api/utils\";\r\nimport { connect } from \"react-redux\";\r\nimport { changePlayList, changeCurrentIndex, changePlayingState } from '../../application/Player/store/actionCreators';\r\n\r\nconst SongList = (props) => {\r\n  const { \r\n    list, \r\n    showCollect, \r\n    subscribedCount,\r\n    setPlayListDispatch,\r\n    setCurrentIndexDispatch,\r\n    setPlayingStateDispatch\r\n  } = props;\r\n  const handleChangePlayList = (index) => {\r\n    setPlayListDispatch(list);\r\n    setCurrentIndexDispatch(index);\r\n    setPlayingStateDispatch();\r\n  }\r\n  const songs =  list.map((item, index) => (\r\n    <ListItem key={index} onClick={() => handleChangePlayList(index)}>\r\n      <div className=\"number\">{index+1}</div>\r\n      <div className=\"song\">\r\n        <p>{item.name}</p>\r\n        <p>{getName(item.ar)} - {item.al.name}</p>\r\n      </div>\r\n    </ListItem>\r\n  ))\r\n  return (\r\n    <>\r\n      <ListHeader>\r\n        <div onClick={() => handleChangePlayList(0)}>\r\n          <i className=\"iconfont icon-bofang\"></i>\r\n          播放全部\r\n          <span>（共{list.length}首）</span>\r\n        </div>\r\n        {\r\n          showCollect &&\r\n          <div>\r\n            <i className=\"iconfont icon-jia\"></i>\r\n            收藏（{getCount(subscribedCount)}）\r\n          </div>\r\n        }\r\n      </ListHeader>\r\n      {songs}\r\n    </>\r\n  )\r\n}\r\n\r\nconst mapDispatch = dispatch => ({\r\n  setPlayListDispatch(list) {\r\n    dispatch(changePlayList(list))\r\n  },\r\n  setCurrentIndexDispatch(index) {\r\n    dispatch(changeCurrentIndex(index));\r\n  },\r\n  setPlayingStateDispatch() {\r\n    dispatch(changePlayingState(true));\r\n  }\r\n})\r\n\r\nexport default connect(null, mapDispatch)(SongList);","import React, { useState, useEffect, useCallback } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { useNavigate, useParams } from 'react-router';\r\nimport { getCount, isValidChange } from '../../api/utils';\r\n\r\nimport {\r\n  TopContainer,\r\n  TopBackground\r\n} from './style';\r\nimport { getAlbumList } from './store/actionCreators';\r\n\r\nimport Loading from '../../baseUI/loading';\r\nimport FixedContainer from '../../baseUI/fixedContainer';\r\nimport Header from '../../baseUI/header';\r\n\r\nimport Scroll from '../../components/scroll';\r\nimport SongList from '../../components/songList';\r\n\r\nfunction Album (props) {\r\n  const nav = useNavigate();\r\n  const {\r\n    currentAlbum: album,\r\n    isLoading,\r\n    getAlbumListDispatch\r\n  } = props;\r\n  const currentAlbum = album.toJS();\r\n\r\n  // 获取歌单详情信息\r\n  const params = useParams();\r\n  useEffect(() => {\r\n    getAlbumListDispatch(params.id);\r\n  },[params.id, getAlbumListDispatch]);\r\n\r\n  // 滑动页面的回调函数，用于设置顶部header的透明度\r\n  const [y, setY] = useState(0);\r\n  const handleScroll = useCallback((e) => {\r\n    if(e.y < 0 && e.y > -100 && isValidChange(e.y, y)){\r\n      setY(e.y);\r\n    }\r\n  },[currentAlbum])\r\n\r\n  // 歌单顶部信息栏\r\n  const renderTopContainer = () => (\r\n    <TopContainer>\r\n      <TopBackground background={currentAlbum.coverImgUrl}></TopBackground>\r\n      <div className=\"content\">\r\n        <div className=\"left_box\">\r\n          <img src={currentAlbum.coverImgUrl} alt={currentAlbum.name} />\r\n          <div className=\"frequency\">\r\n            <span className=\"iconfont icon-24gf-headphones\"></span>\r\n            {getCount(currentAlbum.subscribedCount)}\r\n            </div>\r\n        </div>\r\n        <div className=\"right_box\">\r\n          <div>{currentAlbum.name}</div>\r\n          <div className='avatar'>\r\n            <img \r\n              src={currentAlbum.creator.avatarUrl} \r\n              alt={currentAlbum.creator.nickname} \r\n              className='avatar'\r\n            />\r\n            {currentAlbum.creator.nickname}\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div className=\"button_bar\">{renderButtons}</div>\r\n    </TopContainer>\r\n  )\r\n\r\n  // 顶部的按钮栏\r\n  const buttons = [\r\n    {text:'评论', icon:'icon-pinglun'},\r\n    {text:'点赞', icon:'icon-aixin'},\r\n    {text:'收藏', icon:'icon-jia'},\r\n    {text:'更多', icon:'icon-icmore'},\r\n  ]\r\n  const renderButtons = buttons.map(item => (\r\n    <div className='btn' key={item.text}>\r\n      <i className={\"iconfont \" + item.icon}></i>\r\n      <p>{item.text}</p>\r\n    </div>\r\n  ))\r\n\r\n\r\n  return (\r\n      <FixedContainer>\r\n        <Header \r\n          title='返回' \r\n          handleClick={() => nav(-1)} \r\n          moveY={y} \r\n          marqueeContent={currentAlbum.name}\r\n        />\r\n        { isLoading && <Loading/>}\r\n        {\r\n          !isLoading &&\r\n          <Scroll name='name' onScroll={handleScroll}>\r\n            <div>\r\n              {renderTopContainer()}\r\n              <SongList \r\n                list={currentAlbum.tracks} \r\n                showCollect={true} \r\n                subscribedCount={currentAlbum.subscribedCount}\r\n              />\r\n            </div>\r\n          </Scroll>\r\n        }\r\n      </FixedContainer>\r\n  )\r\n}\r\n\r\nconst mapState = state => ({\r\n  currentAlbum: state.getIn(['album', 'currentAlbum']),\r\n  isLoading: state.getIn(['album', 'isLoading']),\r\n})\r\n\r\nconst mapDispatch = dispatch => ({\r\n  getAlbumListDispatch(id) {\r\n    dispatch(getAlbumList(id));\r\n  }\r\n})\r\n\r\nexport default connect(mapState, mapDispatch)(Album);","export const CHANGE_ARTIST = 'singer/changeArtist';\r\nexport const CHANGE_IS_LOADING = 'singer/changeIsLoading';\r\nexport const CHANGE_SONGS = 'singer/changeSongs';","import {\r\n  CHANGE_ARTIST,\r\n  CHANGE_IS_LOADING,\r\n  CHANGE_SONGS,\r\n} from './constants';\r\nimport {getSingerInfoRequest} from '../../../api/require';\r\n\r\nconst setArtist = (data) => ({\r\n  type: CHANGE_ARTIST,\r\n  data,\r\n})\r\n\r\nconst setSongs = (data) => ({\r\n  type: CHANGE_SONGS,\r\n  data,\r\n})\r\n\r\nexport const setIsLoading = (data) => ({\r\n  type: CHANGE_IS_LOADING,\r\n  data,\r\n})\r\n\r\nexport const getSingerInfoAction = (id) => {\r\n  return dispatch => {\r\n    getSingerInfoRequest(id)\r\n    .then(res => {\r\n      dispatch(setIsLoading(false));\r\n      dispatch(setArtist(res.artist));\r\n      dispatch(setSongs(res.hotSongs));\r\n    })\r\n    .catch(e => console.log('请求歌手详情数据出错：', e))\r\n  }\r\n}","import styled from \"styled-components\";\r\nimport style from \"../../assets/global-style\";\r\n\r\n// export const ImgWrapper = styled.div`\r\n//   position: relative;\r\n//   width: 100%;\r\n//   padding-top: 75%;\r\n//   background: url(${props => props.bgUrl});\r\n//   background-size: cover;\r\n//   z-index: 50;\r\n  // .filter {\r\n  //   position: absolute;\r\n  //   top: 0;\r\n  //   left: 0;\r\n  //   width: 100%;\r\n  //   height: 100%;\r\n  //   background: rgba(7, 17, 27, 0.3);\r\n  // }\r\n// `\r\n\r\nexport const BackgroundImage = styled.div`\r\n  width: 100vw;\r\n  padding-top: 100%;\r\n  position: fixed;\r\n  z-index: -1;\r\n  background-image: url(${props => props.url});\r\n  background-size: cover;\r\n  background-color: rgba(7, 17, 27, 0.3);\r\n  .filter {\r\n    position: absolute;\r\n    top: 0;\r\n    left: 0;\r\n    width: 100%;\r\n    height: 100%;\r\n    background: rgba(7, 17, 27, 0.3);\r\n  }\r\n`\r\n\r\nexport const ImgWrapper = styled.div`\r\n  position: relative;\r\n  width: 100%;\r\n  padding-top: 75%;\r\n`\r\n\r\nexport const CollectButton = styled.div`\r\n  position: absolute;\r\n  left: 50%;\r\n  bottom:10%;\r\n  transform: translate(-50%);\r\n  width: 120px;\r\n  height: 40px;\r\n  z-index: 50;\r\n  background: ${style[\"theme-color\"]};\r\n  color: ${style[\"font-color-light\"]};\r\n  border-radius: 20px;\r\n  ${style['flex']}\r\n`\r\n\r\nexport const ScrollWrapper = styled.div`\r\n  margin-top: 40px;\r\n  height: calc(100vh - 40px);\r\n`\r\n\r\nexport const SongWrapper = styled.div`\r\n  background-color: #fff;\r\n  height: auto;\r\n`","import React, {useEffect} from 'react';\r\nimport { useNavigate, useParams } from 'react-router';\r\nimport { connect } from 'react-redux';\r\nimport FixedContainer from '../../baseUI/fixedContainer';\r\nimport Header from '../../baseUI/header';\r\nimport Loading from '../../baseUI/loading';\r\nimport Scroll from '../../components/scroll';\r\nimport SongList from '../../components/songList'\r\nimport {\r\n\tgetSingerInfoAction,\r\n\tsetIsLoading\r\n} from './store/actionCreators'\r\nimport {\r\n\tBackgroundImage,\r\n\tImgWrapper,\r\n\tCollectButton,\r\n\tSongWrapper,\r\n\tScrollWrapper\r\n} from './style';\r\n\r\nfunction Singer (props) {\r\n\tconst nav = useNavigate();\r\n\tconst {\r\n\t\tartist,\r\n\t\tsongs,\r\n\t\tisLoading,\r\n\t\tinitSingerInfoDispatch\r\n\t} = props;\r\n\tconst params = useParams();\r\n\tuseEffect(() => {\r\n\t\tinitSingerInfoDispatch(params.id)\r\n\t},[params.id,initSingerInfoDispatch]);\r\n  return (\r\n\t\t<FixedContainer>\r\n\t\t\t{isLoading && <Loading/>}\r\n\t\t\t{\r\n\t\t\t\t!isLoading &&\r\n\t\t\t\t<>\r\n\t\t\t\t\t<Header \r\n\t\t\t\t\t\ttitle={artist.name}\r\n\t\t\t\t\t\thandleClick={() => nav(-1)} \r\n      \t\t/>\r\n\t\t\t\t\t<BackgroundImage url={artist.picUrl}>\r\n\t\t\t\t<div className=\"filter\"></div>\r\n\t\t\t\t\t</BackgroundImage>\r\n\t\t\t\t\t<ScrollWrapper id='out'>\r\n\t\t\t\t<Scroll>\r\n\t\t\t\t\t<div id='in'>\r\n\t\t\t\t\t\t<ImgWrapper>\r\n\t\t\t\t\t\t\t<CollectButton><i className=\"iconfont icon-jia\"></i>收藏</CollectButton>\r\n\t\t\t\t\t\t</ImgWrapper>\r\n\t\t\t\t\t\t<SongWrapper>\r\n\t\t\t\t\t\t\t<SongList\r\n\t\t\t\t\t\t\t\tlist={songs}\r\n\t\t\t\t\t\t\t\tshowCollect={false}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</SongWrapper>\r\n\t\t\t\t\t</div>\r\n      \t</Scroll>\r\n\t\t\t\t\t</ScrollWrapper>\r\n\t\t\t\t</>\r\n      }\r\n\t\t</FixedContainer>\r\n  )\r\n}\r\n\r\nconst mapState = state => ({\r\n\tartist: state.getIn(['singer', 'artist']),\r\n\tsongs: state.getIn(['singer', 'songs']),\r\n\tisLoading: state.getIn(['singer', 'isLoading']),\r\n})\r\n\r\nconst mapDispatch = dispatch => ({\r\n\tinitSingerInfoDispatch(id) {\r\n\t\tdispatch(setIsLoading(true));\r\n\t\tdispatch(getSingerInfoAction(id));\r\n\t}\r\n})\r\n\r\nexport default connect(mapState, mapDispatch)(Singer);","import styled, {keyframes} from'styled-components';\r\nimport style from '../../../assets/global-style';\r\n\r\nconst rotate = keyframes`\r\n  0%{\r\n    transform: rotate(0);\r\n  }\r\n  100%{\r\n    transform: rotate(360deg);\r\n  }\r\n`\r\n\r\nexport const MiniPlayerContainer = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n  position: fixed;\r\n  bottom: 0;\r\n  z-index: 1000;\r\n  width: 100%;\r\n  height: 60px;\r\n  background: ${style[\"highlight-background-color\"]};\r\n  .icon {\r\n    flex: 0 0 40px;\r\n    width: 40px;\r\n    height: 40px;\r\n    padding: 0 10px 0 20px;\r\n    .imgWrapper {\r\n      width: 100%;\r\n      height: 100%;\r\n      img {\r\n        border-radius: 50%;\r\n        &.play {\r\n          animation: ${rotate} 10s infinite linear;\r\n        }\r\n        &.pause {\r\n          animation-play-state: paused;\r\n        }\r\n      }\r\n    }\r\n  }\r\n  .text {\r\n    display: flex;\r\n    flex-direction: column;\r\n    justify-content: center;\r\n    flex: 1;\r\n    line-height: 20px;\r\n    overflow: hidden;\r\n    .name {\r\n      margin-bottom: 2px;\r\n      font-size: ${style[\"font-size-m\"]};\r\n      color: ${style[\"font-color-desc\"]};\r\n      ${style.noWrap ()}\r\n    }\r\n    .desc {\r\n      font-size: ${style[\"font-size-s\"]};\r\n      color: ${style[\"font-color-desc-v2\"]};\r\n      ${style.noWrap ()}\r\n    }\r\n  }\r\n  .control {\r\n    flex: 0 0 30px;\r\n    padding: 0 10px;\r\n    .iconfont, .icon-playlist {\r\n      font-size: 20px;\r\n      color: ${style[\"theme-color\"]};\r\n    }\r\n    .icon-mini {\r\n      font-size: 16px;\r\n      position: absolute;\r\n      left: 8px;\r\n      top: 8px;\r\n      &.icon-play {\r\n        left: 9px\r\n      }\r\n    }\r\n  }\r\n`","import React from 'react';\r\nimport styled from'styled-components';\r\nimport style from '../../assets/global-style';\r\n\r\nconst CircleWrapper = styled.div`\r\n  position: relative;\r\n  circle {\r\n    stroke-width: 8px;\r\n    transform-origin: center;\r\n    &.progress-background {\r\n      transform: scale(0.9);\r\n      stroke: ${style[\"theme-color-shadow\"]};\r\n    }\r\n    &.progress-bar {\r\n      transform: scale(0.9) rotate(-90deg);\r\n      stroke: ${style[\"theme-color\"]};\r\n    }\r\n  }\r\n  .content {\r\n    position: absolute;\r\n    top: 50%;\r\n    left: 50%;\r\n    transform: translate(-50%,-50%);\r\n  }\r\n`\r\n\r\nfunction ProgressCircle (props) {\r\n  const {radius, percent} = props;\r\n  // 整个背景的周长\r\n  const dashArray = Math.PI * 100;\r\n  // 没有高亮的部分，剩下高亮的就是进度\r\n  const dashOffset = (1 - percent) * dashArray;\r\n\r\n  return (\r\n    <CircleWrapper>\r\n      <svg width={radius} height={radius} viewBox=\"0 0 100 100\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\">\r\n        <circle className=\"progress-background\" r=\"50\" cx=\"50\" cy=\"50\" fill=\"transparent\"/>\r\n        <circle className=\"progress-bar\" r=\"50\" cx=\"50\" cy=\"50\" fill=\"transparent\" \r\n                strokeDasharray={dashArray}\r\n                strokeDashoffset={dashOffset}/>\r\n      </svg>\r\n      <div className=\"content\">\r\n        {props.children}\r\n      </div>\r\n    </CircleWrapper>\r\n  )\r\n}\r\n\r\nexport default React.memo (ProgressCircle);","import React from 'react';\r\nimport {getName} from '../../../api/utils';\r\nimport { MiniPlayerContainer } from './style';\r\nimport ProgressCircle from '../../../baseUI/progress-circle';\r\n\r\nfunction MiniPlayer (props) {\r\n  const { \r\n    song,\r\n    fullScreen,\r\n    isPlaying,\r\n    percent,\r\n    toggleFullScreen,\r\n    togglePlaying,\r\n    togglePlayList,\r\n  } = props;\r\n  const playBtnClass = () => {\r\n    return isPlaying ?  \"iconfont icon-zanting\" : 'iconfont icon-bofang1';\r\n  }\r\n  return (\r\n    <>\r\n      {\r\n        !fullScreen && \r\n        <MiniPlayerContainer className='animate__animated animate__slideInUp'>\r\n          <div className=\"icon\" onClick={() => toggleFullScreen(true)} >\r\n            <div className=\"imgWrapper\">\r\n              <img className={'play ' + (isPlaying ? '' : 'pause')} src={song.al.picUrl} width=\"40\" height=\"40\" alt=\"img\"/>\r\n            </div>\r\n          </div>\r\n          <div className=\"text\">\r\n            <h2 className=\"name\">{song.name}</h2>\r\n            <p className=\"desc\">{getName(song.ar)}</p>\r\n          </div>\r\n          <div className=\"control\">\r\n            <ProgressCircle radius={32} percent={percent}>\r\n              <i className={playBtnClass()} onClick={() => togglePlaying(!isPlaying)}></i>\r\n            </ProgressCircle>\r\n          </div>\r\n          <div className=\"control\">\r\n            <i className=\"iconfont icon-gedan\" onClick={togglePlayList} style={{fontSize:26}}></i>\r\n          </div>\r\n        </MiniPlayerContainer>\r\n      }\r\n    </>\r\n  )\r\n}\r\n\r\nexport default React.memo (MiniPlayer);","import styled, { keyframes } from \"styled-components\";\r\nimport style from \"../../../assets/global-style\";\r\n\r\nexport const NormalContainer = styled.div`\r\n  position: fixed;\r\n  left: 0;\r\n  right: 0;\r\n  top: 0;\r\n  bottom: 0;\r\n  z-index: 150;\r\n  background: ${style[\"background-color\"]};\r\n  .background {\r\n    position: absolute;\r\n    width: 100%;\r\n    height: 100%;\r\n    z-index: -1;\r\n    opacity: 0.6;\r\n    filter: blur(20px);\r\n    &.layer {\r\n      background: ${style[\"font-color-desc\"]};\r\n      opacity: 0.2;\r\n      filter: none;\r\n    }\r\n  }\r\n  .back {\r\n    position: absolute;\r\n    top: 10px;\r\n    left:10px;\r\n    font-size: 28px;\r\n  }\r\n`;\r\n\r\nexport const NormalHeader = styled.div`\r\n  height: 10vh;\r\n  ${style.flex};\r\n  flex-direction: column;\r\n  p:first-child {\r\n    color: ${style['font-color-desc']};\r\n    font-size: ${style['font-size-ll']};\r\n    margin-bottom: 14px;\r\n  }\r\n  p:nth-child(2) {\r\n    color: ${style['font-color-desc-v2']};\r\n  }\r\n`;\r\n\r\nconst rotate = keyframes`\r\n  0% {\r\n    transform: rotate(0);\r\n  }\r\n  100% {\r\n    transform: rotate(360deg);\r\n  }\r\n`\r\n\r\nexport const ImageContainer = styled.div`\r\n  width: 100vw;\r\n  height: 60vw;\r\n  margin: 20vh 0 15vh;\r\n  ${style.flex}\r\n  overflow: hidden;\r\n  img {\r\n    height: 200px;\r\n    width: 200px;\r\n    border-radius: 100px;\r\n    &.rotate {\r\n      animation: ${rotate} 10s infinite linear;\r\n    }\r\n    &.pause {\r\n      animation-play-state: paused;\r\n    }\r\n  }\r\n`;\r\n\r\nexport const OptionBar = styled.div`\r\n  height: 20vh;\r\n  width: 100%;\r\n  ${style.flex};\r\n  justify-content: space-around;\r\n  span {\r\n    font-size: 28px;\r\n    color: ${style['font-color-desc']};\r\n  }\r\n`;\r\n\r\nexport const ProgressWrapper = styled.div`\r\n  width: 100%;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  .progress-bar-wrapper {\r\n    width: 50%;\r\n    margin: 0 30px;\r\n  }\r\n`","import React, {useEffect, useRef } from 'react';\r\nimport styled from'styled-components';\r\nimport style from '../../assets/global-style';\r\nimport { getAbsX } from './../../api/utils';\r\n\r\nconst ProgressBarWrapper = styled.div`\r\n  width: 100%;\r\n  position: relative;\r\n  height: 30px;\r\n  display: flex;\r\n  align-items: center;\r\n  .progress {\r\n    height: 4px;\r\n    width: 100%;\r\n    background: rgba(0, 0, 0, .3);\r\n  }\r\n`\r\n\r\nconst BtnWrapper = styled.div`\r\n  background-color: ${style['theme-color']};\r\n  height: 4px;\r\n  width: ${props => props.percentage || '0%'};\r\n  display: flex;\r\n  flex-direction: row-reverse;\r\n  align-items: center;\r\n  overflow: visible;\r\n  .progress-btn {\r\n    position: absolute;\r\n    background-color: ${style['theme-color']};\r\n    height: 16px;\r\n    width: 16px;\r\n    border-radius: 50%;\r\n    border: 3px solid ${style['border-color']};\r\n  }\r\n`\r\n\r\nfunction ProgressBar (props) {\r\n  // 获取父级参数并初始化百分比\r\n  const { percentage=0, setPercentage } = props;\r\n  // const [currentPercentage, setCurrentPercentage] = useState(percentage);\r\n\r\n  const progressContainer = useRef();       // 总容器DOM，用来获取进度条起始点坐标\r\n  const btnRef = useRef();                  // 进度条按钮DOM，用来表示当前位置\r\n  const wholeWidth = useRef();              // 进度条总宽度\r\n  const progressStart = useRef();           // 进度条起始点坐标\r\n  const prePercentage = useRef(percentage); // 保存上一次进度条的位置\r\n\r\n  useEffect(() => {\r\n    wholeWidth.current = progressContainer.current.offsetWidth;\r\n    progressStart.current = getAbsX(progressContainer.current);\r\n  },[])\r\n\r\n  // 移动进度条。拖动和点击都通过该函数最终实现\r\n  const offset = (currentX) => {\r\n    if(currentX < progressStart.current) {\r\n      currentX = progressStart.current;\r\n    }\r\n    else if(currentX > progressStart.current + wholeWidth.current) {\r\n      currentX = progressStart.current + wholeWidth.current;\r\n    }\r\n    const newPer = (currentX - progressStart.current) / wholeWidth.current;\r\n    prePercentage.current = currentX;\r\n    const p = (newPer * 100).toFixed(2);\r\n    setPercentage(`${p}%`);\r\n  }\r\n\r\n  // 拖动进度条\r\n  const onTouchMove = (e) => {\r\n    let currentX = e.touches[0].clientX;\r\n    offset(currentX)\r\n  }\r\n\r\n  // 点击移动进度条\r\n  const handleProgressClick = (e) => {\r\n    offset(e.clientX);\r\n  }\r\n  \r\n  return (\r\n    <ProgressBarWrapper>\r\n      <div className=\"progress\" ref={progressContainer} onClick={handleProgressClick}>\r\n        <BtnWrapper percentage={`${percentage * 100}%`}>\r\n          <div \r\n            className=\"progress-btn\" \r\n            ref={btnRef}\r\n            onTouchMove={onTouchMove}\r\n          ></div>\r\n        </BtnWrapper>\r\n      </div>\r\n    </ProgressBarWrapper>\r\n  )\r\n}\r\n\r\nexport default ProgressBar","import React from \"react\";\r\nimport { getName, formatPlayTime } from \"../../../api/utils\";\r\nimport {\r\n  NormalContainer,\r\n  NormalHeader,\r\n  ImageContainer,\r\n  OptionBar,\r\n  ProgressWrapper\r\n} from './style';\r\nimport ProgressBar from \"../../../baseUI/progressBar/index\";\r\n\r\nfunction NormalPlayer(props) {\r\n  const { \r\n    song, \r\n    fullScreen, \r\n    isPlaying,\r\n    percent,\r\n    duration,\r\n    currentTime,\r\n    mode,\r\n  } = props;\r\n  const {\r\n    togglePlaying,\r\n    toggleFullScreen,\r\n    handleProgressChange,\r\n    handleModeChange,\r\n    handleSwitchToPrev,\r\n    handleSwitchToNext,\r\n    togglePlayList,\r\n  } = props;\r\n  const playBtnClass = () => {\r\n    return isPlaying ? 'iconfont icon-zanting1' : 'iconfont icon-bofang-copy';\r\n  }\r\n\r\n  const modeBtn = ['icon-shunxubofang', 'icon-danquxunhuan', 'icon-suijibofang']\r\n  \r\n  return (\r\n    <>\r\n      {\r\n        fullScreen && \r\n        <NormalContainer className='animate__animated animate__slideInUp'>\r\n          <div className=\"background\">\r\n            <img\r\n              src={song.al.picUrl + \"?param=300x300\"}\r\n              width=\"100%\"\r\n              height=\"100%\"\r\n              alt=\"歌曲图片\"\r\n            />\r\n          </div>\r\n          <div className=\"background layer\"></div>\r\n          <i className=\"iconfont icon-xiajiantou back\" onClick={() => toggleFullScreen(false)}></i>\r\n          \r\n          <NormalHeader>\r\n            <p>{song.name}</p>\r\n            <p>{getName (song.ar)}</p>\r\n          </NormalHeader>\r\n        \r\n          <ImageContainer>\r\n            <img src={song.al.picUrl} alt={song.name} className={'rotate ' + (isPlaying ? '' : 'pause')}/>\r\n          </ImageContainer>\r\n          \r\n          <ProgressWrapper>\r\n            <span className=\"time time-left\">{formatPlayTime(currentTime)}</span>\r\n            <div className=\"progress-bar-wrapper\">\r\n              <ProgressBar percentage={percent} setPercentage={handleProgressChange}></ProgressBar>\r\n            </div>\r\n            <div className=\"time time-right\">{formatPlayTime(duration)}</div>\r\n          </ProgressWrapper>\r\n        \r\n          <OptionBar>\r\n            <span \r\n              className={`iconfont ${modeBtn[mode]}`}\r\n              onClick={handleModeChange}\r\n            ></span>\r\n            <span \r\n              className={'iconfont icon-shangyishoushangyige'}\r\n              onClick={handleSwitchToPrev}\r\n            ></span>\r\n            <span \r\n              className={playBtnClass()}\r\n              onClick={() => togglePlaying(!isPlaying)}\r\n            ></span>\r\n            <span \r\n              className={'iconfont icon-xiayigexiayishou'}\r\n              onClick={handleSwitchToNext}\r\n            ></span>\r\n            <span \r\n              className={'iconfont icon-gedan'}\r\n              onClick={togglePlayList}\r\n            ></span>\r\n          </OptionBar>\r\n        </NormalContainer>\r\n      }\r\n    </>\r\n    \r\n      \r\n    \r\n  )\r\n}\r\n\r\nexport default NormalPlayer;","import React, {useState, useImperativeHandle, forwardRef} from 'react';\r\nimport styled from 'styled-components';\r\nimport { CSSTransition } from 'react-transition-group';\r\nimport style from '../../assets/global-style';\r\n\r\nconst ToastWrapper = styled.div`\r\n  position: fixed;\r\n  bottom: 0;\r\n  z-index: 1000;\r\n  width: 100%;\r\n  height: 50px;\r\n  &.drop-enter{\r\n    opacity: 0;\r\n    transform: translate3d(0, 100%, 0);\r\n  }\r\n  &.drop-enter-active{\r\n    opacity: 1;\r\n    transition: all 0.3s;\r\n    transform: translate3d(0, 0, 0);\r\n  }\r\n  &.drop-exit-active{\r\n    opacity: 0;\r\n    transition: all 0.3s;\r\n    transform: translate3d(0, 100%, 0);\r\n  }\r\n  .text{\r\n    line-height: 50px;\r\n    text-align: center;\r\n    color: #fff;\r\n    font-size: ${style[\"font-size-l\"]};\r\n  }\r\n`\r\n//外面组件需要拿到这个函数组件的ref，因此用forwardRef\r\nconst Toast = forwardRef((props, ref) => {\r\n  const [show, setShow] = useState(false);\r\n  const [timer, setTimer] = useState('');\r\n  const {text} = props;\r\n  //外面组件拿函数组件ref的方法，用useImperativeHandle这个hook\r\n  useImperativeHandle(ref, () => ({\r\n    show() {\r\n      // 做了防抖处理\r\n      if(timer) clearTimeout(timer);\r\n      setShow(true);\r\n      setTimer(setTimeout(() => {\r\n        setShow(false)\r\n      }, 3000));\r\n    }\r\n  }))\r\n  return (\r\n    <CSSTransition in={show} timeout={300} classNames=\"drop\" unmountOnExit>\r\n      <ToastWrapper>\r\n        <div className=\"text\">{text}</div>\r\n      </ToastWrapper>\r\n    </CSSTransition>\r\n  )\r\n});\r\n\r\nexport default React.memo(Toast);","import styled from 'styled-components';\r\nimport style from '../../assets/global-style';\r\n// 最外层总容器\r\nexport const Container = styled.div`\r\n  height: 100vh;\r\n  width: 100vw;\r\n  position: fixed;\r\n  top:0;\r\n  z-index: 1000000;\r\n  background-color: ${style['background-color-shadow']};\r\n`\r\n\r\n// 列表容器\r\nexport const ListContainer = styled.div`\r\n  opacity: 0.9;\r\n  height: 60vh;\r\n  width: 100%;\r\n  position: absolute;\r\n  bottom: 0;\r\n  background-color: #fff;\r\n  border-radius: 20px 20px 0 0;\r\n  .title {\r\n    font-size: 18px;\r\n    margin: 10px 0 30px;\r\n    ${style.flex};\r\n    .number {\r\n      font-size: small;\r\n      color: ${style['font-color-desc-v2']};\r\n    }\r\n  }\r\n  .content {\r\n    ${style.flex}\r\n    flex-direction: column;\r\n    .song-item {\r\n      width: 100%;\r\n      margin: 10px 0;\r\n      ${style.noWrap}\r\n      .song-name {\r\n        margin-left: 6px;\r\n        font-size: 14px;\r\n        font-weight:bold;\r\n      }\r\n      .song-singer {\r\n        font-size: 12px;\r\n      }\r\n      i {\r\n        float: right;\r\n        margin-right: 10px;\r\n      }\r\n    }\r\n  }\r\n`","import React,{useRef} from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport {\r\n  Container,\r\n  ListContainer,\r\n} from './style';\r\nimport Scroll from '../../components/scroll'\r\nimport { getName } from \"../../api/utils\";\r\nimport { changeCurrentIndex, changePlayingState, deleteSongFromList } from '../../application/Player/store/actionCreators'\r\n\r\nfunction PlayList(props) {\r\n  const {\r\n    togglePlayList,\r\n    playListImmutable,\r\n    setCurrentIndexDispatch,\r\n    setPlayingStateDispatch,\r\n    deleteSong,\r\n  } = props;\r\n  const playList = playListImmutable.toJS();\r\n  const outsideRef = useRef();\r\n\r\n  // 隐藏歌单列表\r\n  const handleOutsideClick = e => {\r\n    if(e.target === outsideRef.current) {\r\n      togglePlayList()\r\n    }\r\n  }\r\n\r\n  // 切歌\r\n  const handleChangeSong = (index) => {\r\n    setCurrentIndexDispatch(index);\r\n    setPlayingStateDispatch();\r\n  }\r\n\r\n  // 渲染歌曲列表\r\n  const renderSongsList = () => {\r\n    return playList.map((item, index) => (\r\n      <div className=\"song-item\" key={item.name + index}>\r\n        <span onClick={() => handleChangeSong(index)}>\r\n          <span className=\"song-name\" >{item.al.name} - </span>\r\n          <span className=\"song-singer\">{getName(item.ar)}</span>\r\n        </span>\r\n        <i className=\"iconfont icon-shanchu\" onClick={() => deleteSong(index)}></i>\r\n      </div>\r\n    ))\r\n  }\r\n  return(\r\n    <Container onClick={handleOutsideClick} ref={outsideRef}>\r\n      <ListContainer>\r\n        <div className=\"title\">当前播放\r\n          <span className=\"number\">（{playList.length}首）</span>\r\n        </div>\r\n        <Scroll>\r\n          <div className=\"content\">\r\n            {renderSongsList()}\r\n          </div>\r\n        </Scroll>\r\n      </ListContainer>\r\n    </Container>\r\n  )\r\n}\r\nconst mapState = state => ({\r\n  playListImmutable: state.getIn(['player', 'playList'])\r\n})\r\nconst mapDispatch = dispatch => ({\r\n  setCurrentIndexDispatch(index) {\r\n    dispatch(changeCurrentIndex(index));\r\n  },\r\n  setPlayingStateDispatch() {\r\n    dispatch(changePlayingState(true));\r\n  },\r\n  deleteSong(index) {\r\n    dispatch(deleteSongFromList(index))\r\n  }\r\n})\r\nexport default connect(mapState, mapDispatch)(PlayList);","import React, { useRef, useState, useEffect, useCallback } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport {\r\n  changePlayingState,\r\n  changeShowPlayList,\r\n  changeCurrentIndex,\r\n  changeCurrentSong,\r\n  changePlayList,\r\n  changePlayMode,\r\n  changeFullScreen\r\n} from \"./store/actionCreators\";\r\nimport MiniPlayer from \"./miniPlayer\";\r\nimport NormalPlayer from \"./normalPlayer\";\r\nimport { getSongUrl, isValidObject } from \"../../api/utils\";\r\nimport Toast from \"../../baseUI/toast\";\r\nimport PlayList from \"../../baseUI/playList\";\r\n\r\nfunction Player (props) {\r\n  const {\r\n    fullScreen,\r\n    isPlaying,\r\n    mode,\r\n    currentSong: immutableCurrentSong,\r\n    playList: immutableList,\r\n    currentIndex,\r\n    showPlayList\r\n  } = props;\r\n  const { \r\n    toggleFullScreenDispatch, \r\n    togglePlayingDispatch, \r\n    changeCurrentIndexDispatch, \r\n    changeCurrentDispatch ,\r\n    changeModeDispatch,\r\n    togglePlayListDispatch\r\n  } = props;\r\n  const currentSong = immutableCurrentSong.toJS();                          // 当前歌曲\r\n  const playList = immutableList.toJS();                                    // 播放列表\r\n  const [currentTime, setCurrentTime] = useState(0);                        // 目前播放时间\r\n  const [duration, setDuration] = useState(0);                              // 歌曲总时长\r\n  let percent = isNaN(currentTime / duration) ? 0 : currentTime / duration; // 歌曲播放进度\r\n\r\n  const audioRef = useRef();  // 绑定播放器DOM\r\n  const toastRef = useRef();  // 提示框DOM\r\n  const [modeText, setModeText] = useState(\"\"); // 提示框文字\r\n\r\n  const startPlay = useCallback(() => {\r\n    let noCopyright = true;\r\n    audioRef.current.addEventListener('canplay', () => {\r\n      noCopyright = false;\r\n      audioRef.current.play()\r\n      .then(() => togglePlayingDispatch(true))\r\n    });\r\n    setTimeout(() => {\r\n      if(noCopyright) {\r\n        setModeText('这首歌暂时没有版权哦');\r\n        toastRef.current.show();\r\n      }\r\n    },5000)\r\n  },[])\r\n\r\n  useEffect(() => {\r\n    if(isPlaying) {\r\n      startPlay();\r\n    }\r\n  }, [isPlaying, startPlay])\r\n\r\n  useEffect(() => {\r\n    if(currentIndex >= 0) {\r\n      const current = playList[currentIndex];\r\n      changeCurrentDispatch(current);// 赋值currentSong\r\n      audioRef.current.src = getSongUrl(current.id); // 为audio标签添加资源\r\n      setDuration((current.dt / 1000) | 0); // 初始化设置时长\r\n    }\r\n  }, [immutableList, currentIndex, startPlay]);\r\n\r\n  // 切换播放状态\r\n  const handleIsPlaying = (status) => {\r\n    if(status) {\r\n      startPlay();\r\n    }else {\r\n      audioRef.current.pause();\r\n      togglePlayingDispatch(false);\r\n    }\r\n  }\r\n\r\n  // 更新当前时间\r\n  const handleTimeUpdate = (e) => {\r\n    setCurrentTime(e.target.currentTime);\r\n  }\r\n\r\n  // 更新播放进度\r\n  const handleProgressChange = (currentPercent) => {\r\n    const newTime = Number.parseFloat(currentPercent) / 100 * duration;\r\n    setCurrentTime(newTime);\r\n    audioRef.current.currentTime = newTime;\r\n    if (!isPlaying) {\r\n      handleIsPlaying(true);\r\n    }\r\n  }\r\n\r\n  // 跳转到某个下标\r\n  const handleSwitch = (target) => {\r\n    if(target < 0) {\r\n      target = playList.length - 1;\r\n    }else if(target > playList.length - 1) {\r\n      target = 0;\r\n    }\r\n    changeCurrentIndexDispatch(target);\r\n    changeCurrentDispatch(playList[target]);\r\n    audioRef.current.currentTime = 0;\r\n    startPlay();\r\n    if(!isPlaying) {\r\n      togglePlayingDispatch(true);\r\n    }\r\n  };\r\n\r\n  // 获取不同播放模式下的下一首的下标\r\n  const getNextIndex = (tar) => {\r\n    switch(mode){\r\n      case 0:\r\n        return currentIndex + tar;\r\n      case 1:\r\n        return currentIndex;\r\n      case 2:\r\n        return Math.round(playList.length * Math.random());\r\n      default:\r\n        return currentIndex;\r\n    }\r\n  }\r\n\r\n  // 切换到上一首\r\n  const handleSwitchToPrev = () => {\r\n    handleSwitch(getNextIndex(-1));\r\n  }\r\n\r\n  // 切换到下一首\r\n  const handleSwitchToNext = () => {\r\n    handleSwitch(getNextIndex(1));\r\n  }\r\n\r\n  // 切换循环状态\r\n  const handleModeChange = () => {\r\n    const nextMode = (mode + 1) % 3;\r\n    changeModeDispatch(nextMode);\r\n    const text = ['顺序播放', '单曲循环', '随机播放'];\r\n    setModeText(text[nextMode]);\r\n    toastRef.current.show();\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      {\r\n        isValidObject(currentSong) && \r\n        <>\r\n          <MiniPlayer\r\n            song={currentSong}\r\n            fullScreen={fullScreen}\r\n            toggleFullScreen={toggleFullScreenDispatch}\r\n            isPlaying={isPlaying}\r\n            togglePlaying={handleIsPlaying}\r\n            percent={percent}\r\n            togglePlayList={() => togglePlayListDispatch(true)}\r\n          />\r\n          <NormalPlayer\r\n            song={currentSong}\r\n            fullScreen={fullScreen}\r\n            toggleFullScreen={toggleFullScreenDispatch}\r\n            isPlaying={isPlaying}\r\n            togglePlaying={handleIsPlaying}\r\n            percent={percent}\r\n            duration={duration}\r\n            currentTime={currentTime}\r\n            handleProgressChange={handleProgressChange}\r\n            mode={mode}\r\n            handleModeChange={handleModeChange}\r\n            handleSwitchToPrev={handleSwitchToPrev}\r\n            handleSwitchToNext={handleSwitchToNext}\r\n            togglePlayList={() => togglePlayListDispatch(true)}\r\n          />\r\n          <Toast text={modeText} ref={toastRef}/>\r\n        </>\r\n      }\r\n      <audio \r\n        ref={audioRef} \r\n        onTimeUpdate={handleTimeUpdate} \r\n        onEnded={handleSwitchToNext}\r\n      ></audio>\r\n      {\r\n        showPlayList && <PlayList togglePlayList={() => togglePlayListDispatch(false)}/>\r\n      }\r\n    </div>\r\n  )\r\n}\r\n\r\nconst mapStateToProps = state => ({\r\n  fullScreen: state.getIn ([\"player\", \"fullScreen\"]),\r\n  isPlaying: state.getIn ([\"player\", \"isPlaying\"]),\r\n  currentSong: state.getIn ([\"player\", \"currentSong\"]),\r\n  showPlayList: state.getIn ([\"player\", \"showPlayList\"]),\r\n  mode: state.getIn ([\"player\", \"mode\"]),\r\n  currentIndex: state.getIn ([\"player\", \"currentIndex\"]),\r\n  playList: state.getIn ([\"player\", \"playList\"]),\r\n  sequencePlayList: state.getIn ([\"player\", \"sequencePlayList\"])\r\n});\r\n\r\nconst mapDispatchToProps = dispatch => ({\r\n  togglePlayingDispatch (data) {\r\n    dispatch (changePlayingState (data));\r\n  },\r\n  toggleFullScreenDispatch (data) {\r\n    dispatch (changeFullScreen (data));\r\n  },\r\n  togglePlayListDispatch (data) {\r\n    dispatch (changeShowPlayList (data));\r\n  },\r\n  changeCurrentIndexDispatch (index) {\r\n    dispatch (changeCurrentIndex (index));\r\n  },\r\n  changeCurrentDispatch (data) {\r\n    dispatch (changeCurrentSong (data));\r\n  },\r\n  changeModeDispatch (data) {\r\n    dispatch (changePlayMode (data));\r\n  },\r\n  changePlayListDispatch (data) {\r\n    dispatch (changePlayList (data));\r\n  }\r\n})\r\n\r\n// 将 ui 组件包装成容器组件\r\nexport default connect (\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(React.memo (Player));","import styled from \"styled-components\";\r\nimport style from \"../../assets/global-style\";\r\n\r\nexport const Title = styled.p`\r\n  font-size: large;\r\n  font-weight: bold;\r\n`\r\n\r\nexport const HeaderContainer = styled.div`\r\n  height: 5vh;\r\n  padding-top: 10px;\r\n  i {\r\n    margin: 0 8px;\r\n  }\r\n  i:last-child {\r\n    opacity: 0.5;\r\n  }\r\n  input {\r\n    width: 75%;\r\n    margin-left: 20px;\r\n    border: none;\r\n    border-bottom: 1px solid ${style['border-color']};\r\n    outline: none;\r\n    font-size: medium;\r\n  }\r\n`\r\n\r\nexport const HotWordsContainer = styled.div`\r\n  margin: 10px 0 20px;\r\n  .words {\r\n    margin-top: 10px;\r\n    width: 100vw;\r\n    font-size: medium;\r\n    display: flex;\r\n    flex-wrap: wrap;\r\n    .word {\r\n      width: auto;\r\n      min-width: 40px;\r\n      height: 28px;\r\n      padding: 4px;\r\n      background-color: #dedede;\r\n      border-radius: 14px;\r\n      margin: 8px;\r\n      ${style.flex}\r\n    }\r\n  }\r\n`\r\n\r\nexport const SuggestContainer = styled.div`\r\n  .suggest-title {\r\n    font-weight: bold;\r\n    margin: 10px 0;\r\n    border-top: 1px solid ${style['border-color']};\r\n  }\r\n\r\n  .albums-item {\r\n    ${style.noWrap}\r\n    margin: 20px 0;\r\n    padding: 0 20px;\r\n    span:first-child {\r\n      font-size: 20px;\r\n    }\r\n    span:last-child {\r\n      font-size: 14px;\r\n    }\r\n  }\r\n\r\n  .artist-item {\r\n    ${style.noWrap}\r\n    margin: 20px 0;\r\n    padding: 0 20px;\r\n    height: 60px;\r\n    ${style.flex}\r\n    justify-content: flex-start;\r\n    img {\r\n      height: 40px;\r\n      width: 40px;\r\n      border-radius: 20px;\r\n      margin: 0 20px 0 0;\r\n    }\r\n  }\r\n\r\n`\r\n\r\nexport const SearchResult = styled.div`\r\n  height: 90vh;\r\n  width: 100vw;\r\n  padding-top: 5vh;\r\n  position: fixed;\r\n  bottom:0;\r\n  z-index: 1000000;\r\n  background-color: #fff;\r\n  .search-item {\r\n    height: 60px;\r\n    border-bottom: 1px solid ${style['border-color']};\r\n    padding: 0 40px;\r\n    ${style.noWrap}\r\n    ${style.flex}\r\n    justify-content: flex-start;\r\n    span:first-child {\r\n      font-size: 22px;\r\n    }\r\n    span:last-child {\r\n      font-size: 12px;\r\n      font-style: italic;\r\n    }\r\n  }\r\n`","import React, { useState, useEffect } from \"react\";\r\nimport FixedContainer from '../../baseUI/fixedContainer';\r\nimport {\r\n  HeaderContainer,\r\n  HotWordsContainer,\r\n  SuggestContainer,\r\n  Title,\r\n  SearchResult,\r\n} from './style';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport {\r\n  getHotKeyWordsRequest,\r\n  getSuggestListRequest,\r\n  getResultSongsListRequest\r\n} from '../../api/require';\r\nimport Loading from '../../baseUI/loading';\r\nimport Scroll from '../../components/scroll';\r\nimport { isValidObject, getName } from '../../api/utils';\r\n\r\nfunction Search() {\r\n  const nav = useNavigate();\r\n  const [inputValue, setInputValue] = useState('');       // 搜索值\r\n  const [hotWordsList, setHotWordsList] = useState([]);   // 热门搜索词\r\n  const [suggestList, setSuggestList] = useState({});     // 推荐列表\r\n  const [isLoading, setIsLoading] = useState(false);      // 加载状态\r\n  const [searchResult, setSearchResult] = useState([]);   // 搜索结果\r\n\r\n  // 获取热门搜索词\r\n  useEffect(() => {\r\n    getHotKeyWordsRequest()\r\n    .then(res => {\r\n      setHotWordsList(res.result.hots);\r\n      setIsLoading(false);\r\n    })\r\n    .catch(e => console.log(e))\r\n  },[])\r\n\r\n  // 获取推荐列表\r\n  useEffect(() => {\r\n    getSuggestListRequest()\r\n    .then(res => {\r\n      setSuggestList(res.result);\r\n      setIsLoading(false);\r\n    })\r\n    .catch(e => console.log(e))\r\n  },[])\r\n\r\n  // 关键词搜索\r\n  const handleSearch = (word) => {\r\n    setIsLoading(true);\r\n    getResultSongsListRequest(word)\r\n    .then(res => {\r\n      setSearchResult(res.result.songs);\r\n      setIsLoading(false);\r\n    })\r\n  }\r\n\r\n  // 搜索框内容改变回调函数\r\n  const handleInputChange = v => {\r\n    setInputValue(v);\r\n    if(v.length > 0) handleSearch(v);\r\n  }\r\n\r\n  // 热门搜索JSX\r\n  const renderHotWords = hotWordsList.map((item, index) => (\r\n    <div className=\"word\" key={index} onClick={() => handleInputChange(item.first)}>{item.first}</div>\r\n  ))\r\n\r\n  // 推荐专辑JSX\r\n  const renderAlbums = () => (\r\n    <>\r\n      <p className=\"suggest-title\">推荐专辑：</p>\r\n      {\r\n        suggestList.albums.map((item, index) => (\r\n          <div key={index} className=\"albums-item\">\r\n            <span>{item.name}</span>\r\n            <span> - {item.artist.name}</span>\r\n          </div>\r\n        ))\r\n      }\r\n    </>\r\n  )\r\n\r\n  // 推荐歌手JSX\r\n  const renderArtist = () => (\r\n    <>\r\n      <p className=\"suggest-title\">推荐歌手：</p>\r\n      {\r\n        suggestList.artists.map((item,index) => (\r\n          <div className=\"artist-item\" key={index}>\r\n            <img src={item.picUrl} alt=\"歌手图片\" />\r\n            <span>{item.name}</span>\r\n          </div>\r\n        ))\r\n      }\r\n    </>\r\n  )\r\n\r\n  // 推荐歌曲JSX\r\n  const renderSongs = () => (\r\n    <>\r\n      <p className=\"suggest-title\">推荐歌曲</p>\r\n      {\r\n        suggestList.songs.map((item,index) => (\r\n          <div className=\"albums-item\" key={index}>\r\n            <span>{item.name}</span>\r\n            <span> - {getName(item.artists)}</span>\r\n          </div>\r\n        ))\r\n      }\r\n    </>\r\n  )\r\n\r\n  // 搜索结果JSX\r\n  const renderSearchResult = () => (\r\n    <SearchResult>\r\n      <Scroll>\r\n        <div>\r\n          {\r\n            searchResult.map((item, index) => (\r\n              <div key={index} className=\"search-item\">\r\n                <span>{item.name}</span>\r\n                <span> - {getName(item.artists)}</span>\r\n              </div>\r\n            ))\r\n          }\r\n          {isLoading && <Loading/>}\r\n        </div>\r\n      </Scroll>\r\n    </SearchResult>\r\n  )\r\n  \r\n  return (\r\n    <FixedContainer>\r\n      <HeaderContainer>\r\n        <i className=\"iconfont icon-fanhui\" onClick={() => nav(-1)}></i>\r\n        <input \r\n          type=\"text\" \r\n          placeholder=\"请输入搜索内容\"\r\n          value={inputValue}\r\n          onChange={e => handleInputChange(e.target.value)}\r\n        />\r\n        <i className=\"iconfont icon-cuocha_kuai\" onClick={() => setInputValue('')}></i>\r\n      </HeaderContainer>\r\n\r\n      <div style={{height:'95vh'}}>\r\n        <Scroll>\r\n          <div>\r\n            <HotWordsContainer>\r\n              <Title>热门搜索：</Title>\r\n              {isLoading && <Loading/>}\r\n              <div className=\"words\">{hotWordsList.length > 0 && renderHotWords}</div>\r\n            </HotWordsContainer>\r\n\r\n            <SuggestContainer>\r\n              <Title>热门推荐：</Title>\r\n              <div>\r\n                {isValidObject(suggestList) && renderAlbums()}\r\n                {isValidObject(suggestList) && renderArtist()}\r\n                {isValidObject(suggestList) && renderSongs()}\r\n              </div>\r\n            </SuggestContainer>\r\n          </div>\r\n        </Scroll>\r\n      </div>\r\n\r\n      {inputValue.length > 0 && renderSearchResult()}\r\n      \r\n      \r\n    </FixedContainer>\r\n  )\r\n}\r\n\r\nexport default Search;","import { useRoutes, Navigate } from 'react-router-dom'\r\nimport Home from '../application/Home';\r\nimport Recommend from '../application/Recommend';\r\nimport Singers from '../application/Singers';\r\nimport Rank from '../application/Rank';\r\nimport Album from '../application/Album';\r\nimport Singer from '../application/Singer';\r\nimport Player from '../application/Player';\r\nimport Search from '../application/Search';\r\n\r\nconst routes = [\r\n  \t{\r\n  \t  \tpath: '/',\r\n  \t  \telement: <Home/>,\r\n\t\t\t\tchildren: [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tpath: \"/\",\r\n\t\t\t\t\t\texact: true,\r\n\t\t\t\t\t\telement: <Navigate to={\"/recommend\"}/>\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tpath: \"recommend\",\r\n\t\t\t\t\t\telement: <Recommend/>,\r\n\t\t\t\t\t\tchildren:[\r\n\t\t\t\t\t\t\t{ \r\n\t\t\t\t\t\t\t\tpath: ':id', \r\n\t\t\t\t\t\t\t\telement: <Album/>\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t]\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tpath: \"singers\",\r\n\t\t\t\t\t\telement: <Singers/>,\r\n\t\t\t\t\t\tchildren: [\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tpath: ':id',\r\n\t\t\t\t\t\t\t\telement: <Singer/>\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t]\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tpath: \"rank\",\r\n\t\t\t\t\t\telement: <Rank/>,\r\n\t\t\t\t\t\tchildren:[\r\n\t\t\t\t\t\t\t{ \r\n\t\t\t\t\t\t\t\tpath: ':id', \r\n\t\t\t\t\t\t\t\telement: <Album/>\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t]\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tpath: \"search\",\r\n\t\t\t\t\t\telement: <Search/>\r\n\t\t\t\t\t}\r\n\t\t\t\t]\r\n  \t}\r\n]\r\nconst RouteWrapper = () => <>{useRoutes(routes)}<Player/></>\r\nexport default RouteWrapper;","import { fromJS } from \"immutable\";\r\nimport {\r\n    CHANGE_BANNER,\r\n    CHANGE_RECOMMEND_LIST,\r\n    CHANGE_ENTER_LOADING\r\n} from './constants'\r\nconst defaultState = fromJS({\r\n    bannerList: [],\r\n    recommendList: [],\r\n    enterLoading: true,\r\n})\r\n\r\nexport default function reducer(state = defaultState, action) {\r\n    switch(action.type){\r\n        case(CHANGE_RECOMMEND_LIST): {\r\n            return state.set('recommendList', action.data);\r\n        }\r\n        case(CHANGE_BANNER): {\r\n            return state.set('bannerList', action.data);\r\n        }\r\n        case(CHANGE_ENTER_LOADING):{\r\n            return state.set('enterLoading', action.data)\r\n        }\r\n        default: return state;\r\n    }\r\n}","import { fromJS } from 'immutable';\r\nimport {\r\n\tCHANGE_SINGER_LIST,\r\n\tCHANGE_PAGE_COUNT,\r\n\tCHANGE_ENTER_LOADING,\r\n\tCHANGE_PULLUP_LOADING,\r\n\tCHANGE_PULLDOWN_LOADING\r\n} from './constants'\r\n\r\nconst defaultState = fromJS({\r\n  singerList: [],\t\t\t\t\t// 歌手列表\r\n  enterLoading: true,     //控制进场Loading\r\n  pullUpLoading: false,   //控制上拉加载动画\r\n  pullDownLoading: false, //控制下拉加载动画\r\n  pageCount: 0            //当前页数\r\n});\r\nexport default function reducer(state = defaultState, action) {\r\n\tswitch(action.type){\r\n\t\tcase CHANGE_SINGER_LIST:{\r\n      return state.set('singerList', action.data);\r\n    }\r\n      \r\n    case CHANGE_PAGE_COUNT:\r\n      return state.set('pageCount', action.data);\r\n    case CHANGE_ENTER_LOADING:\r\n      return state.set('enterLoading', action.data);\r\n    case CHANGE_PULLUP_LOADING:\r\n      return state.set('pullUpLoading', action.data);\r\n    case CHANGE_PULLDOWN_LOADING:\r\n      return state.set('pullDownLoading', action.data);\r\n    default:\r\n      return state;\r\n\t}\r\n}","import{\r\n  CHANGE_CURRENT_ALBUM,\r\n  CHANGE_IS_LOADING\r\n} from './constants';\r\nimport { fromJS } from 'immutable';\r\n\r\nconst defaultState = fromJS ({\r\n  currentAlbum: {},\r\n  isLoading: true,\r\n})\r\n\r\nconst reducer = (state = defaultState, action) => {\r\n  switch(action.type) {\r\n    case CHANGE_CURRENT_ALBUM:\r\n\t\t\treturn state.set('currentAlbum', action.data);\r\n\t\tcase CHANGE_IS_LOADING:\r\n\t\t\treturn state.set('isLoading', action.data);\r\n\t\tdefault:\r\n\t\t\treturn state;\r\n  }\r\n}\r\n\r\nexport default reducer;","import { fromJS } from 'immutable';\r\nimport {\r\n  CHANGE_ARTIST,\r\n  CHANGE_IS_LOADING,\r\n  CHANGE_SONGS,\r\n} from './constants';\r\n\r\nconst defaultState = fromJS ({\r\n  artist: {},\r\n  songs: [],\r\n  isLoading: true\r\n});\r\n\r\nconst reducer = (state = defaultState, action) => {\r\n  switch(action.type) {\r\n    case CHANGE_ARTIST:\r\n      return state.set('artist', action.data);\r\n    case CHANGE_SONGS:\r\n      return state.set('songs', action.data);\r\n    case CHANGE_IS_LOADING:\r\n      return state.set('isLoading', action.data);\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n\r\nexport default reducer;","import { fromJS } from \"immutable\";\r\nimport * as actionTypes from './constants';\r\n\r\nconst playMode = {\r\n  sequence: 0,\r\n  loop: 1,\r\n  random: 2\r\n};\r\nconst defaultState = fromJS({\r\n  fullScreen: false,        // 是否为全屏\r\n  isPlaying: false,           // 是否在播放\r\n  sequencePlaylist: [],     // 顺序播放列表\r\n  playList: [],             // 播放列表\r\n  mode: playMode.sequence,  // 播放模式\r\n  currentIndex: -1,         // 当前播放的歌曲在列表中的下标\r\n  showPlaylist: false,      // 是否显示播放列表\r\n  currentSong: {},          // 当前播放的歌曲\r\n})\r\n\r\nexport default function reducer(state = defaultState, action) {\r\n  switch (action.type) {\r\n    case actionTypes.SET_CURRENT_SONG:\r\n      return state.set ('currentSong', action.data);\r\n    case actionTypes.SET_FULL_SCREEN:\r\n      return state.set ('fullScreen', action.data);\r\n    case actionTypes.SET_PLAYING_STATE:\r\n      return state.set ('isPlaying', action.data);\r\n    case actionTypes.SET_SEQUECE_PLAYLIST:\r\n      return state.set ('sequencePlayList', action.data);\r\n    case actionTypes.SET_PLAYLIST:\r\n      return state.set ('playList', action.data);\r\n    case actionTypes.SET_PLAY_MODE:\r\n      return state.set ('mode', action.data);\r\n    case actionTypes.SET_CURRENT_INDEX:\r\n      return state.set ('currentIndex', action.data);\r\n    case actionTypes.SET_SHOW_PLAYLIST:\r\n      return state.set ('showPlayList', action.data);\r\n    case actionTypes.DELETE_SONG: {\r\n      const list = state.get('playList').toJS();\r\n      list.splice(action.data,1);\r\n      return state.set('playList', fromJS(list));\r\n    }\r\n    default:\r\n      return state;\r\n  }\r\n}","import { combineReducers } from \"redux-immutable\";\r\nimport { reducer as recommend } from \"../application/Recommend/store\";\r\nimport { reducer as singers } from '../application/Singers/store';\r\nimport { reducer as rank } from '../application/Rank/store';\r\nimport { reducer as album } from '../application/Album/store';\r\nimport { reducer as singer } from '../application/Singer/store';\r\nimport { reducer as player } from '../application/Player/store';\r\n\r\nexport default combineReducers({\r\n    recommend,\r\n    singers,\r\n    singer,\r\n    rank,\r\n    album,\r\n    player,\r\n})","import { createStore, applyMiddleware, compose } from \"redux\";\r\nimport reducer from \"./reducer\";\r\nimport thunk from \"redux-thunk\";\r\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\r\nconst store = createStore(\r\n    reducer,\r\n    composeEnhancers(applyMiddleware(thunk))\r\n)\r\n\r\nexport default store;","import GlobalStyle from './style';\r\nimport { HashRouter as Router } from 'react-router-dom'\r\nimport RouteWrapper from './routes';\r\nimport store from './store';\r\nimport { Provider } from 'react-redux';\r\nimport 'animate.css';\r\nfunction App() {\r\n  return (\r\n    <Provider store={store}>\r\n      <GlobalStyle/>\r\n      <Router>\r\n        <RouteWrapper/>\r\n      </Router>\r\n    </Provider>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);"],"sourceRoot":""}